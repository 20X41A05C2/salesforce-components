"use strict";var Dc=Object.create;var Vt=Object.defineProperty;var Fc=Object.getOwnPropertyDescriptor;var qc=Object.getOwnPropertyNames;var Mc=Object.getPrototypeOf,Vc=Object.prototype.hasOwnProperty;var h=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),$c=(s,e)=>{for(var t in e)Vt(s,t,{get:e[t],enumerable:!0})},Fn=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of qc(e))!Vc.call(s,n)&&n!==t&&Vt(s,n,{get:()=>e[n],enumerable:!(r=Fc(e,n))||r.enumerable});return s};var ge=(s,e,t)=>(t=s!=null?Dc(Mc(s)):{},Fn(e||!s||!s.__esModule?Vt(t,"default",{value:s,enumerable:!0}):t,s)),kc=s=>Fn(Vt({},"__esModule",{value:!0}),s);var $t=h(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.Event=_e.Response=_e.Message=void 0;var pt=class{constructor(e){this.seq=0,this.type=e}};_e.Message=pt;var Zr=class extends pt{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};_e.Response=Zr;var es=class extends pt{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}};_e.Event=es});var qn=h(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.ProtocolServer=void 0;var jc=require("events"),ft=$t(),ts=class{get event(){return this._event||(this._event=(e,t)=>{this._listener=e,this._this=t;let r;return r={dispose:()=>{this._listener=void 0,this._this=void 0}},r}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch{}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}},Ce=class extends jc.EventEmitter{constructor(){super(),this._sendMessage=new ts,this._sequence=1,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if(e.type==="request")this.dispatchRequest(e);else if(e.type==="response"){let t=e,r=this._pendingRequests.get(t.request_seq);r&&(this._pendingRequests.delete(t.request_seq),r(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._writableStream=t,this._rawData=Buffer.alloc(0),e.on("data",r=>this._handleData(r)),e.on("close",()=>{this._emitEvent(new ft.Event("close"))}),e.on("error",r=>{this._emitEvent(new ft.Event("error","inStream error: "+(r&&r.message)))}),t.on("error",r=>{this._emitEvent(new ft.Event("error","outStream error: "+(r&&r.message)))}),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,r,n){let i={command:e};if(t&&Object.keys(t).length>0&&(i.arguments=t),this._send("request",i),n){this._pendingRequests.set(i.seq,n);let o=setTimeout(()=>{clearTimeout(o);let c=this._pendingRequests.get(i.seq);c&&(this._pendingRequests.delete(i.seq),c(new ft.Response(i,"timeout")))},r)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){let r=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(r,"utf8")}\r
\r
${r}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let t=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,t.length>0)try{let r=JSON.parse(t);this.handleMessage(r)}catch(r){this._emitEvent(new ft.Event("error","Error handling data: "+(r&&r.message)))}continue}}else{let t=this._rawData.indexOf(Ce.TWO_CRLF);if(t!==-1){let n=this._rawData.toString("utf8",0,t).split(`\r
`);for(let i=0;i<n.length;i++){let o=n[i].split(/: +/);o[0]=="Content-Length"&&(this._contentLength=+o[1])}this._rawData=this._rawData.slice(t+Ce.TWO_CRLF.length);continue}}break}}};kt.ProtocolServer=Ce;Ce.TWO_CRLF=`\r
\r
`});var Mn=h(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.runDebugAdapter=void 0;var Uc=require("net");function Hc(s){let e=0;if(process.argv.slice(2).forEach(function(r,n,i){let o=/^--server=(\d{4,5})$/.exec(r);o&&(e=parseInt(o[1],10))}),e>0)console.error(`waiting for debug protocol on port ${e}`),Uc.createServer(r=>{console.error(">> accepted connection from client"),r.on("end",()=>{console.error(`>> client connection closed
`)});let n=new s(!1,!0);n.setRunAsServer(!0),n.start(r,r)}).listen(e);else{let r=new s(!1);process.on("SIGTERM",()=>{r.shutdown()}),r.start(process.stdin,process.stdout)}}jt.runDebugAdapter=Hc});var Ut=h(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.DebugSession=A.ErrorDestination=A.MemoryEvent=A.InvalidatedEvent=A.ProgressEndEvent=A.ProgressUpdateEvent=A.ProgressStartEvent=A.CapabilitiesEvent=A.LoadedSourceEvent=A.ModuleEvent=A.BreakpointEvent=A.ThreadEvent=A.OutputEvent=A.ExitedEvent=A.TerminatedEvent=A.InitializedEvent=A.ContinuedEvent=A.StoppedEvent=A.CompletionItem=A.Module=A.Breakpoint=A.Variable=A.Thread=A.StackFrame=A.Scope=A.Source=void 0;var Bc=qn(),Q=$t(),Gc=Mn(),Vn=require("url"),rs=class{constructor(e,t,r=0,n,i){this.name=e,this.path=t,this.sourceReference=r,n&&(this.origin=n),i&&(this.adapterData=i)}};A.Source=rs;var ss=class{constructor(e,t,r=!1){this.name=e,this.variablesReference=t,this.expensive=r}};A.Scope=ss;var ns=class{constructor(e,t,r,n=0,i=0){this.id=e,this.source=r,this.line=n,this.column=i,this.name=t}};A.StackFrame=ns;var is=class{constructor(e,t){this.id=e,t?this.name=t:this.name="Thread #"+e}};A.Thread=is;var os=class{constructor(e,t,r=0,n,i){this.name=e,this.value=t,this.variablesReference=r,typeof i=="number"&&(this.namedVariables=i),typeof n=="number"&&(this.indexedVariables=n)}};A.Variable=os;var as=class{constructor(e,t,r,n){this.verified=e;let i=this;typeof t=="number"&&(i.line=t),typeof r=="number"&&(i.column=r),n&&(i.source=n)}setId(e){this.id=e}};A.Breakpoint=as;var us=class{constructor(e,t){this.id=e,this.name=t}};A.Module=us;var cs=class{constructor(e,t,r=0){this.label=e,this.start=t,this.length=r}};A.CompletionItem=cs;var ls=class extends Q.Event{constructor(e,t,r){super("stopped"),this.body={reason:e},typeof t=="number"&&(this.body.threadId=t),typeof r=="string"&&(this.body.text=r)}};A.StoppedEvent=ls;var ps=class extends Q.Event{constructor(e,t){super("continued"),this.body={threadId:e},typeof t=="boolean"&&(this.body.allThreadsContinued=t)}};A.ContinuedEvent=ps;var fs=class extends Q.Event{constructor(){super("initialized")}};A.InitializedEvent=fs;var hs=class extends Q.Event{constructor(e){if(super("terminated"),typeof e=="boolean"||e){let t=this;t.body={restart:e}}}};A.TerminatedEvent=hs;var ds=class extends Q.Event{constructor(e){super("exited"),this.body={exitCode:e}}};A.ExitedEvent=ds;var gs=class extends Q.Event{constructor(e,t="console",r){super("output"),this.body={category:t,output:e},r!==void 0&&(this.body.data=r)}};A.OutputEvent=gs;var ms=class extends Q.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}};A.ThreadEvent=ms;var bs=class extends Q.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}};A.BreakpointEvent=bs;var Es=class extends Q.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}};A.ModuleEvent=Es;var _s=class extends Q.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}};A.LoadedSourceEvent=_s;var vs=class extends Q.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}};A.CapabilitiesEvent=vs;var ys=class extends Q.Event{constructor(e,t,r){super("progressStart"),this.body={progressId:e,title:t},typeof r=="string"&&(this.body.message=r)}};A.ProgressStartEvent=ys;var Rs=class extends Q.Event{constructor(e,t){super("progressUpdate"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};A.ProgressUpdateEvent=Rs;var Ss=class extends Q.Event{constructor(e,t){super("progressEnd"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};A.ProgressEndEvent=Ss;var xs=class extends Q.Event{constructor(e,t,r){super("invalidated"),this.body={},e&&(this.body.areas=e),t&&(this.body.threadId=t),r&&(this.body.stackFrameId=r)}};A.InvalidatedEvent=xs;var Ls=class extends Q.Event{constructor(e,t,r){super("memory"),this.body={memoryReference:e,offset:t,count:r}}};A.MemoryEvent=Ls;var Ae;(function(s){s[s.User=1]="User",s[s.Telemetry=2]="Telemetry"})(Ae=A.ErrorDestination||(A.ErrorDestination={}));var he=class extends Bc.ProtocolServer{constructor(e,t){super();let r=typeof e=="boolean"?e:!1;this._debuggerLinesStartAt1=r,this._debuggerColumnsStartAt1=r,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer=typeof t=="boolean"?t:!1,this.on("close",()=>{this.shutdown()}),this.on("error",n=>{this.shutdown()})}setDebuggerPathFormat(e){this._debuggerPathsAreURIs=e!=="path"}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){(0,Gc.runDebugAdapter)(e)}shutdown(){this._isServer||this._isRunningInline()||setTimeout(()=>{process.exit(0)},100)}sendErrorResponse(e,t,r,n,i=Ae.User){let o;typeof t=="number"?(o={id:t,format:r},n&&(o.variables=n),i&Ae.User&&(o.showUser=!0),i&Ae.Telemetry&&(o.sendTelemetry=!0)):o=t,e.success=!1,e.message=he.formatPII(o.format,!0,o.variables),e.body||(e.body={}),e.body.error=o,this.sendResponse(e)}runInTerminalRequest(e,t,r){this.sendRequest("runInTerminal",e,t,r)}dispatchRequest(e){let t=new Q.Response(e);try{if(e.command==="initialize"){var r=e.arguments;if(typeof r.linesStartAt1=="boolean"&&(this._clientLinesStartAt1=r.linesStartAt1),typeof r.columnsStartAt1=="boolean"&&(this._clientColumnsStartAt1=r.columnsStartAt1),r.pathFormat!=="path")this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,Ae.Telemetry);else{let n=t;n.body={},this.initializeRequest(n,r)}}else e.command==="launch"?this.launchRequest(t,e.arguments,e):e.command==="attach"?this.attachRequest(t,e.arguments,e):e.command==="disconnect"?this.disconnectRequest(t,e.arguments,e):e.command==="terminate"?this.terminateRequest(t,e.arguments,e):e.command==="restart"?this.restartRequest(t,e.arguments,e):e.command==="setBreakpoints"?this.setBreakPointsRequest(t,e.arguments,e):e.command==="setFunctionBreakpoints"?this.setFunctionBreakPointsRequest(t,e.arguments,e):e.command==="setExceptionBreakpoints"?this.setExceptionBreakPointsRequest(t,e.arguments,e):e.command==="configurationDone"?this.configurationDoneRequest(t,e.arguments,e):e.command==="continue"?this.continueRequest(t,e.arguments,e):e.command==="next"?this.nextRequest(t,e.arguments,e):e.command==="stepIn"?this.stepInRequest(t,e.arguments,e):e.command==="stepOut"?this.stepOutRequest(t,e.arguments,e):e.command==="stepBack"?this.stepBackRequest(t,e.arguments,e):e.command==="reverseContinue"?this.reverseContinueRequest(t,e.arguments,e):e.command==="restartFrame"?this.restartFrameRequest(t,e.arguments,e):e.command==="goto"?this.gotoRequest(t,e.arguments,e):e.command==="pause"?this.pauseRequest(t,e.arguments,e):e.command==="stackTrace"?this.stackTraceRequest(t,e.arguments,e):e.command==="scopes"?this.scopesRequest(t,e.arguments,e):e.command==="variables"?this.variablesRequest(t,e.arguments,e):e.command==="setVariable"?this.setVariableRequest(t,e.arguments,e):e.command==="setExpression"?this.setExpressionRequest(t,e.arguments,e):e.command==="source"?this.sourceRequest(t,e.arguments,e):e.command==="threads"?this.threadsRequest(t,e):e.command==="terminateThreads"?this.terminateThreadsRequest(t,e.arguments,e):e.command==="evaluate"?this.evaluateRequest(t,e.arguments,e):e.command==="stepInTargets"?this.stepInTargetsRequest(t,e.arguments,e):e.command==="gotoTargets"?this.gotoTargetsRequest(t,e.arguments,e):e.command==="completions"?this.completionsRequest(t,e.arguments,e):e.command==="exceptionInfo"?this.exceptionInfoRequest(t,e.arguments,e):e.command==="loadedSources"?this.loadedSourcesRequest(t,e.arguments,e):e.command==="dataBreakpointInfo"?this.dataBreakpointInfoRequest(t,e.arguments,e):e.command==="setDataBreakpoints"?this.setDataBreakpointsRequest(t,e.arguments,e):e.command==="readMemory"?this.readMemoryRequest(t,e.arguments,e):e.command==="writeMemory"?this.writeMemoryRequest(t,e.arguments,e):e.command==="disassemble"?this.disassembleRequest(t,e.arguments,e):e.command==="cancel"?this.cancelRequest(t,e.arguments,e):e.command==="breakpointLocations"?this.breakpointLocationsRequest(t,e.arguments,e):e.command==="setInstructionBreakpoints"?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(n){this.sendErrorResponse(t,1104,"{_stack}",{_exception:n.message,_stack:n.stack},Ae.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,e.body.supportsExceptionFilterOptions=!1,this.sendResponse(e)}disconnectRequest(e,t,r){this.sendResponse(e),this.shutdown()}launchRequest(e,t,r){this.sendResponse(e)}attachRequest(e,t,r){this.sendResponse(e)}terminateRequest(e,t,r){this.sendResponse(e)}restartRequest(e,t,r){this.sendResponse(e)}setBreakPointsRequest(e,t,r){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,r){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,r){this.sendResponse(e)}configurationDoneRequest(e,t,r){this.sendResponse(e)}continueRequest(e,t,r){this.sendResponse(e)}nextRequest(e,t,r){this.sendResponse(e)}stepInRequest(e,t,r){this.sendResponse(e)}stepOutRequest(e,t,r){this.sendResponse(e)}stepBackRequest(e,t,r){this.sendResponse(e)}reverseContinueRequest(e,t,r){this.sendResponse(e)}restartFrameRequest(e,t,r){this.sendResponse(e)}gotoRequest(e,t,r){this.sendResponse(e)}pauseRequest(e,t,r){this.sendResponse(e)}sourceRequest(e,t,r){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,r){this.sendResponse(e)}stackTraceRequest(e,t,r){this.sendResponse(e)}scopesRequest(e,t,r){this.sendResponse(e)}variablesRequest(e,t,r){this.sendResponse(e)}setVariableRequest(e,t,r){this.sendResponse(e)}setExpressionRequest(e,t,r){this.sendResponse(e)}evaluateRequest(e,t,r){this.sendResponse(e)}stepInTargetsRequest(e,t,r){this.sendResponse(e)}gotoTargetsRequest(e,t,r){this.sendResponse(e)}completionsRequest(e,t,r){this.sendResponse(e)}exceptionInfoRequest(e,t,r){this.sendResponse(e)}loadedSourcesRequest(e,t,r){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,r){this.sendResponse(e)}setDataBreakpointsRequest(e,t,r){this.sendResponse(e)}readMemoryRequest(e,t,r){this.sendResponse(e)}writeMemoryRequest(e,t,r){this.sendResponse(e)}disassembleRequest(e,t,r){this.sendResponse(e)}cancelRequest(e,t,r){this.sendResponse(e)}breakpointLocationsRequest(e,t,r){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,r){this.sendResponse(e)}customRequest(e,t,r,n){this.sendErrorResponse(t,1014,"unrecognized request",null,Ae.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?he.uri2path(e):he.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?he.uri2path(e):he.path2uri(e):e}static path2uri(e){process.platform==="win32"&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new Vn.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new Vn.URL(e),r=decodeURIComponent(t.pathname);return process.platform==="win32"&&(/^\/[a-zA-Z]:/.test(r)&&(r=r[1].toLowerCase()+r.substr(2)),r=r.replace(/\//g,"\\")),r}static formatPII(e,t,r){return e.replace(he._formatPIIRegexp,function(n,i){return t&&i.length>0&&i[0]!=="_"?n:r[i]&&r.hasOwnProperty(i)?r[i]:n})}};A.DebugSession=he;he._formatPIIRegexp=/{([^}]+)}/g});var Un=h(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.InternalLogger=void 0;var $n=require("fs"),kn=require("path"),oe=Gt(),Ts=class{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=oe.LogLevel.Warn,this.disposeCallback=(r,n)=>{this.dispose(),n=n||2,n+=128,process.exit(n)}}async setup(e){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(!kn.isAbsolute(e.logFilePath))this.log(`logFilePath must be an absolute path: ${e.logFilePath}`,oe.LogLevel.Error);else{let t=r=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${r.toString()}
`,oe.LogLevel.Error);try{await $n.promises.mkdir(kn.dirname(e.logFilePath),{recursive:!0}),this.log(`Verbose logs are written to:
`,oe.LogLevel.Warn),this.log(e.logFilePath+`
`,oe.LogLevel.Warn),this._logFileStream=$n.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",r=>{t(r)})}catch(r){t(r)}}}logDateTime(){let e=new Date,r=e.getUTCFullYear()+`-${e.getUTCMonth()+1}-`+e.getUTCDate()+", "+jn();this.log(r+`
`,oe.LogLevel.Verbose,!1)}setupShutdownListeners(){process.on("beforeExit",this.beforeExitCallback),process.on("SIGTERM",this.disposeCallback),process.on("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise(e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()})}log(e,t,r=!0){if(this._minLogLevel!==oe.LogLevel.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){let n=t===oe.LogLevel.Error?console.error:t===oe.LogLevel.Warn?console.warn:null;n&&n((0,oe.trimLastNewline)(e))}t===oe.LogLevel.Error&&(e=`[${oe.LogLevel[t]}] ${e}`),this._prependTimestamp&&r&&(e="["+jn()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){let r=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",r&&(e=e+`
`)}if(this._logCallback){let r=new oe.LogOutputEvent(e,t);this._logCallback(r)}}};Bt.InternalLogger=Ts;function jn(){let s=new Date,e=Ht(2,String(s.getUTCHours())),t=Ht(2,String(s.getUTCMinutes())),r=Ht(2,String(s.getUTCSeconds())),n=Ht(3,String(s.getUTCMilliseconds()));return e+":"+t+":"+r+"."+n+" UTC"}function Ht(s,e){return e.length>=s?e:String("0".repeat(s)+e).slice(-s)}});var Gt=h(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.trimLastNewline=ae.LogOutputEvent=ae.logger=ae.Logger=ae.LogLevel=void 0;var Xc=Un(),zc=Ut(),ve;(function(s){s[s.Verbose=0]="Verbose",s[s.Log=1]="Log",s[s.Warn=2]="Warn",s[s.Error=3]="Error",s[s.Stop=4]="Stop"})(ve=ae.LogLevel||(ae.LogLevel={}));var Xt=class{constructor(){this._pendingLogQ=[]}log(e,t=ve.Log){e=e+`
`,this._write(e,t)}verbose(e){this.log(e,ve.Verbose)}warn(e){this.log(e,ve.Warn)}error(e){this.log(e,ve.Error)}dispose(){if(this._currentLogger){let e=this._currentLogger.dispose();return this._currentLogger=null,e}else return Promise.resolve()}_write(e,t=ve.Log){e=e+"",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,r=!0){let n=typeof t=="string"?t:t&&this._logFilePathFromInit;if(this._currentLogger){let i={consoleMinLogLevel:e,logFilePath:n,prependTimestamp:r};this._currentLogger.setup(i).then(()=>{if(this._pendingLogQ){let o=this._pendingLogQ;this._pendingLogQ=null,o.forEach(c=>this._write(c.msg,c.level))}})}}init(e,t,r){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new Xc.InternalLogger(e,r),this._logFilePathFromInit=t}};ae.Logger=Xt;ae.logger=new Xt;var Os=class extends zc.OutputEvent{constructor(e,t){let r=t===ve.Error?"stderr":t===ve.Warn?"console":"stdout";super(e,r)}};ae.LogOutputEvent=Os;function Yc(s){return s.replace(/(\n|\r\n)$/,"")}ae.trimLastNewline=Yc});var Gn=h(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.LoggingDebugSession=void 0;var Bn=Gt(),$e=Bn.logger,Hn=Ut(),Cs=class extends Hn.DebugSession{constructor(e,t,r){super(t,r),this.obsolete_logFilePath=e,this.on("error",n=>{$e.error(n.body)})}start(e,t){super.start(e,t),$e.init(r=>this.sendEvent(r),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof Bn.LogOutputEvent)){let t=e;e instanceof Hn.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t={...e},t.body={...e.body,output:"<output not logged>"}),$e.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,r,n){$e.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${r}`),super.sendRequest(e,t,r,n)}sendResponse(e){$e.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){$e.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}};zt.LoggingDebugSession=Cs});var Xn=h(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.Handles=void 0;var As=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle=typeof e=="number"?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}};Yt.Handles=As});var ht=h(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.Handles=L.Response=L.Event=L.ErrorDestination=L.CompletionItem=L.Module=L.Source=L.Breakpoint=L.Variable=L.Scope=L.StackFrame=L.Thread=L.MemoryEvent=L.InvalidatedEvent=L.ProgressEndEvent=L.ProgressUpdateEvent=L.ProgressStartEvent=L.CapabilitiesEvent=L.LoadedSourceEvent=L.ModuleEvent=L.BreakpointEvent=L.ThreadEvent=L.OutputEvent=L.ContinuedEvent=L.StoppedEvent=L.ExitedEvent=L.TerminatedEvent=L.InitializedEvent=L.logger=L.Logger=L.LoggingDebugSession=L.DebugSession=void 0;var U=Ut();Object.defineProperty(L,"DebugSession",{enumerable:!0,get:function(){return U.DebugSession}});Object.defineProperty(L,"InitializedEvent",{enumerable:!0,get:function(){return U.InitializedEvent}});Object.defineProperty(L,"TerminatedEvent",{enumerable:!0,get:function(){return U.TerminatedEvent}});Object.defineProperty(L,"ExitedEvent",{enumerable:!0,get:function(){return U.ExitedEvent}});Object.defineProperty(L,"StoppedEvent",{enumerable:!0,get:function(){return U.StoppedEvent}});Object.defineProperty(L,"ContinuedEvent",{enumerable:!0,get:function(){return U.ContinuedEvent}});Object.defineProperty(L,"OutputEvent",{enumerable:!0,get:function(){return U.OutputEvent}});Object.defineProperty(L,"ThreadEvent",{enumerable:!0,get:function(){return U.ThreadEvent}});Object.defineProperty(L,"BreakpointEvent",{enumerable:!0,get:function(){return U.BreakpointEvent}});Object.defineProperty(L,"ModuleEvent",{enumerable:!0,get:function(){return U.ModuleEvent}});Object.defineProperty(L,"LoadedSourceEvent",{enumerable:!0,get:function(){return U.LoadedSourceEvent}});Object.defineProperty(L,"CapabilitiesEvent",{enumerable:!0,get:function(){return U.CapabilitiesEvent}});Object.defineProperty(L,"ProgressStartEvent",{enumerable:!0,get:function(){return U.ProgressStartEvent}});Object.defineProperty(L,"ProgressUpdateEvent",{enumerable:!0,get:function(){return U.ProgressUpdateEvent}});Object.defineProperty(L,"ProgressEndEvent",{enumerable:!0,get:function(){return U.ProgressEndEvent}});Object.defineProperty(L,"InvalidatedEvent",{enumerable:!0,get:function(){return U.InvalidatedEvent}});Object.defineProperty(L,"MemoryEvent",{enumerable:!0,get:function(){return U.MemoryEvent}});Object.defineProperty(L,"Thread",{enumerable:!0,get:function(){return U.Thread}});Object.defineProperty(L,"StackFrame",{enumerable:!0,get:function(){return U.StackFrame}});Object.defineProperty(L,"Scope",{enumerable:!0,get:function(){return U.Scope}});Object.defineProperty(L,"Variable",{enumerable:!0,get:function(){return U.Variable}});Object.defineProperty(L,"Breakpoint",{enumerable:!0,get:function(){return U.Breakpoint}});Object.defineProperty(L,"Source",{enumerable:!0,get:function(){return U.Source}});Object.defineProperty(L,"Module",{enumerable:!0,get:function(){return U.Module}});Object.defineProperty(L,"CompletionItem",{enumerable:!0,get:function(){return U.CompletionItem}});Object.defineProperty(L,"ErrorDestination",{enumerable:!0,get:function(){return U.ErrorDestination}});var Jc=Gn();Object.defineProperty(L,"LoggingDebugSession",{enumerable:!0,get:function(){return Jc.LoggingDebugSession}});var zn=Gt();L.Logger=zn;var Yn=$t();Object.defineProperty(L,"Event",{enumerable:!0,get:function(){return Yn.Event}});Object.defineProperty(L,"Response",{enumerable:!0,get:function(){return Yn.Response}});var Wc=Xn();Object.defineProperty(L,"Handles",{enumerable:!0,get:function(){return Wc.Handles}});var Kc=zn.logger;L.logger=Kc});var gt=h(mi=>{"use strict";var Qc=typeof window<"u"&&window,Zc=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self,el=typeof global<"u"&&global,gi=Qc||el||Zc;mi.root=gi;(function(){if(!gi)throw new Error("RxJS could not find any global context (window, self, global)")})()});var rr=h(bi=>{"use strict";function tl(s){return typeof s=="function"}bi.isFunction=tl});var Ds=h(Ei=>{"use strict";Ei.isArray=Array.isArray||function(s){return s&&typeof s.length=="number"}});var vi=h(_i=>{"use strict";function rl(s){return s!=null&&typeof s=="object"}_i.isObject=rl});var sr=h(yi=>{"use strict";yi.errorObject={e:{}}});var Fs=h(xi=>{"use strict";var Ri=sr(),Si;function sl(){try{return Si.apply(this,arguments)}catch(s){return Ri.errorObject.e=s,Ri.errorObject}}function nl(s){return Si=s,sl}xi.tryCatch=nl});var Li=h(nr=>{"use strict";var il=nr&&nr.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},ol=function(s){il(e,s);function e(t){s.call(this),this.errors=t;var r=Error.call(this,t?t.length+` errors occurred during unsubscription:
  `+t.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return e}(Error);nr.UnsubscriptionError=ol});var or=h(Ci=>{"use strict";var al=Ds(),ul=vi(),cl=rr(),Ti=Fs(),Ge=sr(),ir=Li(),ll=function(){function s(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return s.prototype.unsubscribe=function(){var e=!1,t;if(!this.closed){var r=this,n=r._parent,i=r._parents,o=r._unsubscribe,c=r._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,u=i?i.length:0;n;)n.remove(this),n=++a<u&&i[a]||null;if(cl.isFunction(o)){var l=Ti.tryCatch(o).call(this);l===Ge.errorObject&&(e=!0,t=t||(Ge.errorObject.e instanceof ir.UnsubscriptionError?Oi(Ge.errorObject.e.errors):[Ge.errorObject.e]))}if(al.isArray(c))for(a=-1,u=c.length;++a<u;){var p=c[a];if(ul.isObject(p)){var l=Ti.tryCatch(p.unsubscribe).call(p);if(l===Ge.errorObject){e=!0,t=t||[];var f=Ge.errorObject.e;f instanceof ir.UnsubscriptionError?t=t.concat(Oi(f.errors)):t.push(f)}}}if(e)throw new ir.UnsubscriptionError(t)}},s.prototype.add=function(e){if(!e||e===s.EMPTY)return s.EMPTY;if(e===this)return this;var t=e;switch(typeof e){case"function":t=new s(e);case"object":if(t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(typeof t._addParent!="function"){var r=t;t=new s,t._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var n=this._subscriptions||(this._subscriptions=[]);return n.push(t),t._addParent(this),t},s.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);r!==-1&&t.splice(r,1)}},s.prototype._addParent=function(e){var t=this,r=t._parent,n=t._parents;!r||r===e?this._parent=e:n?n.indexOf(e)===-1&&n.push(e):this._parents=[e]},s.EMPTY=function(e){return e.closed=!0,e}(new s),s}();Ci.Subscription=ll;function Oi(s){return s.reduce(function(e,t){return e.concat(t instanceof ir.UnsubscriptionError?t.errors:t)},[])}});var qs=h(Ai=>{"use strict";Ai.empty={closed:!0,next:function(s){},error:function(s){throw s},complete:function(){}}});var Vs=h(ar=>{"use strict";var pl=gt(),Ms=pl.root.Symbol;ar.rxSubscriber=typeof Ms=="function"&&typeof Ms.for=="function"?Ms.for("rxSubscriber"):"@@rxSubscriber";ar.$$rxSubscriber=ar.rxSubscriber});var Ni=h(ur=>{"use strict";var Pi=ur&&ur.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},Ii=rr(),fl=or(),$s=qs(),ks=Vs(),js=function(s){Pi(e,s);function e(t,r,n){switch(s.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=$s.empty;break;case 1:if(!t){this.destination=$s.empty;break}if(typeof t=="object"){if(hl(t)){var i=t[ks.rxSubscriber]();this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,i.add(this)}else this.syncErrorThrowable=!0,this.destination=new wi(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new wi(this,t,r,n);break}}return e.prototype[ks.rxSubscriber]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,s.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,r=t._parent,n=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=r,this._parents=n,this},e}(fl.Subscription);ur.Subscriber=js;var wi=function(s){Pi(e,s);function e(t,r,n,i){s.call(this),this._parentSubscriber=t;var o,c=this;Ii.isFunction(r)?o=r:r&&(o=r.next,n=r.error,i=r.complete,r!==$s.empty&&(c=Object.create(r),Ii.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=o,this._error=n,this._complete=i}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber;if(this._error)r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)r.syncErrorValue=t,r.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),t}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};r.syncErrorThrowable?(this.__tryOrSetError(r,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(n){throw this.unsubscribe(),n}},e.prototype.__tryOrSetError=function(t,r,n){try{r.call(this._context,n)}catch(i){return t.syncErrorValue=i,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(js);function hl(s){return s instanceof js||"syncErrorThrowable"in s&&s[ks.rxSubscriber]}});var qi=h(Fi=>{"use strict";var Us=Ni(),Di=Vs(),dl=qs();function gl(s,e,t){if(s){if(s instanceof Us.Subscriber)return s;if(s[Di.rxSubscriber])return s[Di.rxSubscriber]()}return!s&&!e&&!t?new Us.Subscriber(dl.empty):new Us.Subscriber(s,e,t)}Fi.toSubscriber=gl});var Vi=h(mt=>{"use strict";var ml=gt();function Mi(s){var e,t=s.Symbol;return typeof t=="function"?t.observable?e=t.observable:(e=t("observable"),t.observable=e):e="@@observable",e}mt.getSymbolObservable=Mi;mt.observable=Mi(ml.root);mt.$$observable=mt.observable});var ki=h($i=>{"use strict";function bl(){}$i.noop=bl});var Ui=h(Hs=>{"use strict";var El=ki();function _l(){for(var s=[],e=0;e<arguments.length;e++)s[e-0]=arguments[e];return ji(s)}Hs.pipe=_l;function ji(s){return s?s.length===1?s[0]:function(t){return s.reduce(function(r,n){return n(r)},t)}:El.noop}Hs.pipeFromArray=ji});var Xe=h(Hi=>{"use strict";var le=gt(),vl=qi(),yl=Vi(),Rl=Ui(),Sl=function(){function s(e){this._isScalar=!1,e&&(this._subscribe=e)}return s.prototype.lift=function(e){var t=new s;return t.source=this,t.operator=e,t},s.prototype.subscribe=function(e,t,r){var n=this.operator,i=vl.toSubscriber(e,t,r);if(n?n.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},s.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},s.prototype.forEach=function(e,t){var r=this;if(t||(le.root.Rx&&le.root.Rx.config&&le.root.Rx.config.Promise?t=le.root.Rx.config.Promise:le.root.Promise&&(t=le.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(n,i){var o;o=r.subscribe(function(c){if(o)try{e(c)}catch(a){i(a),o.unsubscribe()}else e(c)},i,n)})},s.prototype._subscribe=function(e){return this.source.subscribe(e)},s.prototype[yl.observable]=function(){return this},s.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e.length===0?this:Rl.pipeFromArray(e)(this)},s.prototype.toPromise=function(e){var t=this;if(e||(le.root.Rx&&le.root.Rx.config&&le.root.Rx.config.Promise?e=le.root.Rx.config.Promise:le.root.Promise&&(e=le.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(r,n){var i;t.subscribe(function(o){return i=o},function(o){return n(o)},function(){return r(i)})})},s.create=function(e){return new s(e)},s}();Hi.Observable=Sl});var Ji=h((tm,Yi)=>{"use strict";var zi=require("child_process"),Bi=zi.spawn,xl=zi.exec;Yi.exports=function(s,e,t){if(typeof e=="function"&&t===void 0&&(t=e,e=void 0),s=parseInt(s),Number.isNaN(s)){if(t)return t(new Error("pid must be a number"));throw new Error("pid must be a number")}var r={},n={};switch(r[s]=[],n[s]=1,process.platform){case"win32":xl("taskkill /pid "+s+" /T /F",t);break;case"darwin":Bs(s,r,n,function(i){return Bi("pgrep",["-P",i])},function(){Gi(r,e,t)});break;default:Bs(s,r,n,function(i){return Bi("ps",["-o","pid","--no-headers","--ppid",i])},function(){Gi(r,e,t)});break}};function Gi(s,e,t){var r={};try{Object.keys(s).forEach(function(n){s[n].forEach(function(i){r[i]||(Xi(i,e),r[i]=1)}),r[n]||(Xi(n,e),r[n]=1)})}catch(n){if(t)return t(n);throw n}if(t)return t()}function Xi(s,e){try{process.kill(parseInt(s,10),e)}catch(t){if(t.code!=="ESRCH")throw t}}function Bs(s,e,t,r,n){var i=r(s),o="";i.stdout.on("data",function(u){var u=u.toString("ascii");o+=u});var c=function(a){if(delete t[s],a!=0){Object.keys(t).length==0&&n();return}o.match(/\d+/g).forEach(function(u){u=parseInt(u,10),e[s].push(u),e[u]=[],t[u]=1,Bs(u,e,t,r,n)})};i.on("close",c)}});var Xs=h(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.CliCommandExecution=J.KILL_CODE=J.CANCELLATION_INTERVAL=J.NO_STDERR_ERROR=J.NO_STDOUT_ERROR=J.NO_PID_ERROR=void 0;var bt=Xe(),Ll=Ji();J.NO_PID_ERROR="No process associated with sfdx command.";J.NO_STDOUT_ERROR="No stdout found for childProcess";J.NO_STDERR_ERROR="No stderr found for childProcess";J.CANCELLATION_INTERVAL=1e3;J.KILL_CODE="SIGKILL";var Gs=class{constructor(e,t,r){if(this.command=e,this.cancellationToken=r,!t.pid)throw new Error(J.NO_PID_ERROR);this.childProcessPid=t.pid;let n;if(this.processExitSubject=bt.Observable.fromEvent(t,"exit"),this.processExitSubject.subscribe(()=>{n&&n.unsubscribe()}),this.processErrorSubject=bt.Observable.fromEvent(t,"error"),this.processErrorSubject.subscribe(()=>{n&&n.unsubscribe()}),!t.stdout)throw new Error(J.NO_STDOUT_ERROR);if(this.stdoutSubject=bt.Observable.fromEvent(t.stdout,"data"),!t.stderr)throw new Error(J.NO_STDERR_ERROR);this.stderrSubject=bt.Observable.fromEvent(t.stderr,"data"),r&&(n=bt.Observable.interval(J.CANCELLATION_INTERVAL).subscribe(async()=>{if(r.isCancellationRequested)try{await this.killExecution()}catch(o){console.log(o)}}))}async killExecution(e=J.KILL_CODE){return Tl(this.childProcessPid,e)}};J.CliCommandExecution=Gs;var Tl=(s,e)=>new Promise((t,r)=>{Ll(s,e,n=>{n&&r(n),t()})})});var eo=h((sm,Zi)=>{Zi.exports=Qi;Qi.sync=Cl;var Wi=require("fs");function Ol(s,e){var t=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!t||(t=t.split(";"),t.indexOf("")!==-1))return!0;for(var r=0;r<t.length;r++){var n=t[r].toLowerCase();if(n&&s.substr(-n.length).toLowerCase()===n)return!0}return!1}function Ki(s,e,t){return!s.isSymbolicLink()&&!s.isFile()?!1:Ol(e,t)}function Qi(s,e,t){Wi.stat(s,function(r,n){t(r,r?!1:Ki(n,s,e))})}function Cl(s,e){return Ki(Wi.statSync(s),s,e)}});var io=h((nm,no)=>{no.exports=ro;ro.sync=Al;var to=require("fs");function ro(s,e,t){to.stat(s,function(r,n){t(r,r?!1:so(n,e))})}function Al(s,e){return so(to.statSync(s),e)}function so(s,e){return s.isFile()&&Il(s,e)}function Il(s,e){var t=s.mode,r=s.uid,n=s.gid,i=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),o=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),c=parseInt("100",8),a=parseInt("010",8),u=parseInt("001",8),l=c|a,p=t&u||t&a&&n===o||t&c&&r===i||t&l&&i===0;return p}});var ao=h((om,oo)=>{var im=require("fs"),cr;process.platform==="win32"||global.TESTING_WINDOWS?cr=eo():cr=io();oo.exports=zs;zs.sync=wl;function zs(s,e,t){if(typeof e=="function"&&(t=e,e={}),!t){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,n){zs(s,e||{},function(i,o){i?n(i):r(o)})})}cr(s,e||{},function(r,n){r&&(r.code==="EACCES"||e&&e.ignoreErrors)&&(r=null,n=!1),t(r,n)})}function wl(s,e){try{return cr.sync(s,e||{})}catch(t){if(e&&e.ignoreErrors||t.code==="EACCES")return!1;throw t}}});var go=h((am,ho)=>{var ze=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",uo=require("path"),Pl=ze?";":":",co=ao(),lo=s=>Object.assign(new Error(`not found: ${s}`),{code:"ENOENT"}),po=(s,e)=>{let t=e.colon||Pl,r=s.match(/\//)||ze&&s.match(/\\/)?[""]:[...ze?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(t)],n=ze?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=ze?n.split(t):[""];return ze&&s.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:r,pathExt:i,pathExtExe:n}},fo=(s,e,t)=>{typeof e=="function"&&(t=e,e={}),e||(e={});let{pathEnv:r,pathExt:n,pathExtExe:i}=po(s,e),o=[],c=u=>new Promise((l,p)=>{if(u===r.length)return e.all&&o.length?l(o):p(lo(s));let f=r[u],d=/^".*"$/.test(f)?f.slice(1,-1):f,g=uo.join(d,s),E=!d&&/^\.[\\\/]/.test(s)?s.slice(0,2)+g:g;l(a(E,u,0))}),a=(u,l,p)=>new Promise((f,d)=>{if(p===n.length)return f(c(l+1));let g=n[p];co(u+g,{pathExt:i},(E,N)=>{if(!E&&N)if(e.all)o.push(u+g);else return f(u+g);return f(a(u,l,p+1))})});return t?c(0).then(u=>t(null,u),t):c(0)},Nl=(s,e)=>{e=e||{};let{pathEnv:t,pathExt:r,pathExtExe:n}=po(s,e),i=[];for(let o=0;o<t.length;o++){let c=t[o],a=/^".*"$/.test(c)?c.slice(1,-1):c,u=uo.join(a,s),l=!a&&/^\.[\\\/]/.test(s)?s.slice(0,2)+u:u;for(let p=0;p<r.length;p++){let f=l+r[p];try{if(co.sync(f,{pathExt:n}))if(e.all)i.push(f);else return f}catch{}}}if(e.all&&i.length)return i;if(e.nothrow)return null;throw lo(s)};ho.exports=fo;fo.sync=Nl});var bo=h((um,Ys)=>{"use strict";var mo=(s={})=>{let e=s.env||process.env;return(s.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"};Ys.exports=mo;Ys.exports.default=mo});var yo=h((cm,vo)=>{"use strict";var Eo=require("path"),Dl=go(),Fl=bo();function _o(s,e){let t=s.options.env||process.env,r=process.cwd(),n=s.options.cwd!=null,i=n&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(s.options.cwd)}catch{}let o;try{o=Dl.sync(s.command,{path:t[Fl({env:t})],pathExt:e?Eo.delimiter:void 0})}catch{}finally{i&&process.chdir(r)}return o&&(o=Eo.resolve(n?s.options.cwd:"",o)),o}function ql(s){return _o(s)||_o(s,!0)}vo.exports=ql});var Ro=h((lm,Ws)=>{"use strict";var Js=/([()\][%!^"`<>&|;, *?])/g;function Ml(s){return s=s.replace(Js,"^$1"),s}function Vl(s,e){return s=`${s}`,s=s.replace(/(\\*)"/g,'$1$1\\"'),s=s.replace(/(\\*)$/,"$1$1"),s=`"${s}"`,s=s.replace(Js,"^$1"),e&&(s=s.replace(Js,"^$1")),s}Ws.exports.command=Ml;Ws.exports.argument=Vl});var xo=h((pm,So)=>{"use strict";So.exports=/^#!(.*)/});var To=h((fm,Lo)=>{"use strict";var $l=xo();Lo.exports=(s="")=>{let e=s.match($l);if(!e)return null;let[t,r]=e[0].replace(/#! ?/,"").split(" "),n=t.split("/").pop();return n==="env"?r:r?`${n} ${r}`:n}});var Co=h((hm,Oo)=>{"use strict";var Ks=require("fs"),kl=To();function jl(s){let t=Buffer.alloc(150),r;try{r=Ks.openSync(s,"r"),Ks.readSync(r,t,0,150,0),Ks.closeSync(r)}catch{}return kl(t.toString())}Oo.exports=jl});var Po=h((dm,wo)=>{"use strict";var Ul=require("path"),Ao=yo(),Io=Ro(),Hl=Co(),Bl=process.platform==="win32",Gl=/\.(?:com|exe)$/i,Xl=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function zl(s){s.file=Ao(s);let e=s.file&&Hl(s.file);return e?(s.args.unshift(s.file),s.command=e,Ao(s)):s.file}function Yl(s){if(!Bl)return s;let e=zl(s),t=!Gl.test(e);if(s.options.forceShell||t){let r=Xl.test(e);s.command=Ul.normalize(s.command),s.command=Io.command(s.command),s.args=s.args.map(i=>Io.argument(i,r));let n=[s.command].concat(s.args).join(" ");s.args=["/d","/s","/c",`"${n}"`],s.command=process.env.comspec||"cmd.exe",s.options.windowsVerbatimArguments=!0}return s}function Jl(s,e,t){e&&!Array.isArray(e)&&(t=e,e=null),e=e?e.slice(0):[],t=Object.assign({},t);let r={command:s,args:e,options:t,file:void 0,original:{command:s,args:e}};return t.shell?r:Yl(r)}wo.exports=Jl});var Fo=h((gm,Do)=>{"use strict";var Qs=process.platform==="win32";function Zs(s,e){return Object.assign(new Error(`${e} ${s.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${s.command}`,path:s.command,spawnargs:s.args})}function Wl(s,e){if(!Qs)return;let t=s.emit;s.emit=function(r,n){if(r==="exit"){let i=No(n,e,"spawn");if(i)return t.call(s,"error",i)}return t.apply(s,arguments)}}function No(s,e){return Qs&&s===1&&!e.file?Zs(e.original,"spawn"):null}function Kl(s,e){return Qs&&s===1&&!e.file?Zs(e.original,"spawnSync"):null}Do.exports={hookChildProcess:Wl,verifyENOENT:No,verifyENOENTSync:Kl,notFoundError:Zs}});var Vo=h((mm,Ye)=>{"use strict";var qo=require("child_process"),en=Po(),tn=Fo();function Mo(s,e,t){let r=en(s,e,t),n=qo.spawn(r.command,r.args,r.options);return tn.hookChildProcess(n,r),n}function Ql(s,e,t){let r=en(s,e,t),n=qo.spawnSync(r.command,r.args,r.options);return n.error=n.error||tn.verifyENOENTSync(n.status,r),n}Ye.exports=Mo;Ye.exports.spawn=Mo;Ye.exports.sync=Ql;Ye.exports._parse=en;Ye.exports._enoent=tn});var jo=h(lr=>{"use strict";var Zl=lr&&lr.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},ep=Xe(),tp=Fs(),rp=rr(),$o=sr(),sp=or(),ko=Object.prototype.toString;function np(s){return!!s&&typeof s.addListener=="function"&&typeof s.removeListener=="function"}function ip(s){return!!s&&typeof s.on=="function"&&typeof s.off=="function"}function op(s){return!!s&&ko.call(s)==="[object NodeList]"}function ap(s){return!!s&&ko.call(s)==="[object HTMLCollection]"}function up(s){return!!s&&typeof s.addEventListener=="function"&&typeof s.removeEventListener=="function"}var cp=function(s){Zl(e,s);function e(t,r,n,i){s.call(this),this.sourceObj=t,this.eventName=r,this.selector=n,this.options=i}return e.create=function(t,r,n,i){return rp.isFunction(n)&&(i=n,n=void 0),new e(t,r,i,n)},e.setupSubscription=function(t,r,n,i,o){var c;if(op(t)||ap(t))for(var a=0,u=t.length;a<u;a++)e.setupSubscription(t[a],r,n,i,o);else if(up(t)){var l=t;t.addEventListener(r,n,o),c=function(){return l.removeEventListener(r,n,o)}}else if(ip(t)){var p=t;t.on(r,n),c=function(){return p.off(r,n)}}else if(np(t)){var f=t;t.addListener(r,n),c=function(){return f.removeListener(r,n)}}else throw new TypeError("Invalid event target");i.add(new sp.Subscription(c))},e.prototype._subscribe=function(t){var r=this.sourceObj,n=this.eventName,i=this.options,o=this.selector,c=o?function(){for(var a=[],u=0;u<arguments.length;u++)a[u-0]=arguments[u];var l=tp.tryCatch(o).apply(void 0,a);l===$o.errorObject?t.error($o.errorObject.e):t.next(l)}:function(a){return t.next(a)};e.setupSubscription(r,n,c,t,i)},e}(ep.Observable);lr.FromEventObservable=cp});var Ho=h(Uo=>{"use strict";var lp=jo();Uo.fromEvent=lp.FromEventObservable.create});var Bo=h(()=>{"use strict";var pp=Xe(),fp=Ho();pp.Observable.fromEvent=fp.fromEvent});var Xo=h(Go=>{"use strict";var hp=Ds();function dp(s){return!hp.isArray(s)&&s-parseFloat(s)+1>=0}Go.isNumeric=dp});var zo=h(pr=>{"use strict";var gp=pr&&pr.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},mp=or(),bp=function(s){gp(e,s);function e(t,r){s.call(this)}return e.prototype.schedule=function(t,r){return r===void 0&&(r=0),this},e}(mp.Subscription);pr.Action=bp});var Jo=h(fr=>{"use strict";var Ep=fr&&fr.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},Yo=gt(),_p=zo(),vp=function(s){Ep(e,s);function e(t,r){s.call(this,t,r),this.scheduler=t,this.pending=!1,this.work=r}return e.prototype.schedule=function(t,r){if(r===void 0&&(r=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,i=this.scheduler;return n!=null&&(this.id=this.recycleAsyncId(i,n,r)),this.delay=r,this.id=this.id||this.requestAsyncId(i,this.id,r),this},e.prototype.requestAsyncId=function(t,r,n){return n===void 0&&(n=0),Yo.root.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,r,n){return n===void 0&&(n=0),n!==null&&this.delay===n&&this.pending===!1?r:Yo.root.clearInterval(r)&&void 0||void 0},e.prototype.execute=function(t,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,r);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,r){var n=!1,i=void 0;try{this.work(t)}catch(o){n=!0,i=!!o&&o||new Error(o)}if(n)return this.unsubscribe(),i},e.prototype._unsubscribe=function(){var t=this.id,r=this.scheduler,n=r.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,i!==-1&&n.splice(i,1),t!=null&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null},e}(_p.Action);fr.AsyncAction=vp});var Ko=h(Wo=>{"use strict";var yp=function(){function s(e,t){t===void 0&&(t=s.now),this.SchedulerAction=e,this.now=t}return s.prototype.schedule=function(e,t,r){return t===void 0&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},s.now=Date.now?Date.now:function(){return+new Date},s}();Wo.Scheduler=yp});var Qo=h(hr=>{"use strict";var Rp=hr&&hr.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},Sp=Ko(),xp=function(s){Rp(e,s);function e(){s.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return e.prototype.flush=function(t){var r=this.actions;if(this.active){r.push(t);return}var n;this.active=!0;do if(n=t.execute(t.state,t.delay))break;while(t=r.shift());if(this.active=!1,n){for(;t=r.shift();)t.unsubscribe();throw n}},e}(Sp.Scheduler);hr.AsyncScheduler=xp});var ea=h(Zo=>{"use strict";var Lp=Jo(),Tp=Qo();Zo.async=new Tp.AsyncScheduler(Lp.AsyncAction)});var ta=h(dr=>{"use strict";var Op=dr&&dr.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},Cp=Xo(),Ap=Xe(),rn=ea(),Ip=function(s){Op(e,s);function e(t,r){t===void 0&&(t=0),r===void 0&&(r=rn.async),s.call(this),this.period=t,this.scheduler=r,(!Cp.isNumeric(t)||t<0)&&(this.period=0),(!r||typeof r.schedule!="function")&&(this.scheduler=rn.async)}return e.create=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=rn.async),new e(t,r)},e.dispatch=function(t){var r=t.index,n=t.subscriber,i=t.period;n.next(r),!n.closed&&(t.index+=1,this.schedule(t,i))},e.prototype._subscribe=function(t){var r=0,n=this.period,i=this.scheduler;t.add(i.schedule(e.dispatch,n,{index:r,subscriber:t,period:n}))},e}(Ap.Observable);dr.IntervalObservable=Ip});var sa=h(ra=>{"use strict";var wp=ta();ra.interval=wp.IntervalObservable.create});var na=h(()=>{"use strict";var Pp=Xe(),Np=sa();Pp.Observable.interval=Np.interval});var ia=h(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.TELEMETRY_HEADER=k.SF_CONFIG_ISV_DEBUGGER_URL=k.SF_CONFIG_ISV_DEBUGGER_SID=k.SF_COMMAND=k.MISSING_LABEL_MSG=k.LOCALE_JA=k.DEFAULT_LOCALE=k.BASE_FILE_EXTENSION=k.BASE_FILE_NAME=k.ENV_SF_ORG_INSTANCE_URL=k.ENV_HTTPS_PROXY=k.ENV_HTTP_PROXY=k.ENV_SF_TARGET_ORG=k.DEFAULT_CONNECTION_TIMEOUT_MS=k.CLIENT_ID=void 0;k.CLIENT_ID="sfdx-vscode";k.DEFAULT_CONNECTION_TIMEOUT_MS=2e4;k.ENV_SF_TARGET_ORG="SF_TARGET_ORG";k.ENV_HTTP_PROXY="HTTP_PROXY";k.ENV_HTTPS_PROXY="HTTPS_PROXY";k.ENV_SF_ORG_INSTANCE_URL="SF_ORG_INSTANCE_URL";k.BASE_FILE_NAME="i18n";k.BASE_FILE_EXTENSION="js";k.DEFAULT_LOCALE="en";k.LOCALE_JA="ja";k.MISSING_LABEL_MSG="!!! MISSING LABEL !!!";k.SF_COMMAND="sf";k.SF_CONFIG_ISV_DEBUGGER_SID="org-isv-debugger-sid";k.SF_CONFIG_ISV_DEBUGGER_URL="org-isv-debugger-url";k.TELEMETRY_HEADER="salesforce-vscode-extensions"});var Je=h(Ie=>{"use strict";var Dp=Ie&&Ie.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(s,r,n)}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),Fp=Ie&&Ie.__exportStar||function(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Dp(e,s,t)};Object.defineProperty(Ie,"__esModule",{value:!0});Fp(ia(),Ie)});var sn=h(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.GlobalCliEnvironment=void 0;var gr=class{};mr.GlobalCliEnvironment=gr;gr.environmentVariables=new Map});var Er=h(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.CliCommandExecutor=void 0;var qp=Vo();Bo();na();var Mp=Je(),Vp=Xs(),$p=sn(),Et=class{static patchEnv(e,t){let r=Object.create(null);return Object.assign(r,process.env),t.forEach((n,i)=>{r[i]=n}),r&&(r.SFDX_TOOL=Mp.TELEMETRY_HEADER),typeof e.env<"u"&&Object.assign(r,e.env),e.env=r,e}constructor(e,t,r=!0){this.command=e,this.options=r?Et.patchEnv(t,$p.GlobalCliEnvironment.environmentVariables):t}execute(e){let t=qp(this.command.command,this.command.args,this.options);return new Vp.CliCommandExecution(this.command,t,e)}};br.CliCommandExecutor=Et});var oa=h(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.Command=void 0;var nn=class{constructor(e){this.command=e.command,this.description=e.description,this.args=e.args,this.logName=e.logName}toString(){return this.description?this.description:`${this.command} ${this.args.join(" ")}`}toCommand(){return`${this.command} ${this.args.join(" ")}`}};_r.Command=nn});var vr=h(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.CommandBuilder=ye.JSON_FLAG=void 0;var kp=oa();ye.JSON_FLAG="--json";var on=class{constructor(e){this.args=[],this.command=e}withDescription(e){return this.description=e,this}withArg(e){return e===ye.JSON_FLAG?this.withJson():this.args.push(e),this}withFlag(e,t){return this.args.push(e,t),this}withJson(){return this.args.push(ye.JSON_FLAG),this}withLogName(e){return this.logName=e,this}build(){return new kp.Command(this)}};ye.CommandBuilder=on});var aa=h(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.extractJsonObject=void 0;var jp=s=>{let e=s.substring(s.indexOf("{"),s.lastIndexOf("}")+1);return JSON.parse(e)};yr.extractJsonObject=jp});var ua=h(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.ensureCurrentWorkingDirIsProjectPath=void 0;var Up=require("fs"),Hp=s=>{s&&process.cwd()!==s&&Up.existsSync(s)&&process.chdir(s)};Rr.ensureCurrentWorkingDirIsProjectPath=Hp});var ca=h(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.stripAnsiInJson=void 0;var Bp=(s,e)=>e?s.replaceAll(Gp(),""):s;Sr.stripAnsiInJson=Bp;var Gp=({onlyFirst:s=!1}={})=>{let e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(e,s?void 0:"g")}});var an=h(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.stripAnsiInJson=Re.ensureCurrentWorkingDirIsProjectPath=Re.extractJsonObject=void 0;var Xp=aa();Object.defineProperty(Re,"extractJsonObject",{enumerable:!0,get:function(){return Xp.extractJsonObject}});var zp=ua();Object.defineProperty(Re,"ensureCurrentWorkingDirIsProjectPath",{enumerable:!0,get:function(){return zp.ensureCurrentWorkingDirIsProjectPath}});var Yp=ca();Object.defineProperty(Re,"stripAnsiInJson",{enumerable:!0,get:function(){return Yp.stripAnsiInJson}})});var Lr=h(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.CommandOutput=void 0;var _t=an(),Jp=vr(),un=class{constructor(){this.stdoutBuffer="",this.stderrBuffer=""}async getCmdResult(e){let t=e.command?.args?.some(r=>r===Jp.JSON_FLAG);return e.stdoutSubject.subscribe(r=>{this.stdoutBuffer+=r.toString()}),e.stderrSubject.subscribe(r=>{this.stderrBuffer+=r.toString()}),new Promise((r,n)=>{e.processExitSubject.subscribe(i=>i!==void 0&&String(i)==="0"?r((0,_t.stripAnsiInJson)(this.stdoutBuffer,t)):e.command.command==="sf"?n((0,_t.stripAnsiInJson)(this.stdoutBuffer,t)||(0,_t.stripAnsiInJson)(this.stderrBuffer,t)):n((0,_t.stripAnsiInJson)(this.stderrBuffer,t)||(0,_t.stripAnsiInJson)(this.stdoutBuffer,t)))})}};xr.CommandOutput=un});var Or=h(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.SfCommandBuilder=void 0;var Wp=Je(),Kp=vr(),cn=class extends Kp.CommandBuilder{constructor(){super(Wp.SF_COMMAND)}};Tr.SfCommandBuilder=cn});var la=h(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.ConfigGet=void 0;var Qp=Er(),Zp=Lr(),ef=Or(),ln=class{async getConfig(e,...t){let r=new ef.SfCommandBuilder().withArg("config:get");t.forEach(c=>r.withArg(c));let n=new Qp.CliCommandExecutor(r.withJson().build(),{cwd:e}).execute(),o=await new Zp.CommandOutput().getCmdResult(n);try{let c=new Map;return JSON.parse(o).result.forEach(u=>c.set(u.key,u.value)),Promise.resolve(c)}catch(c){return Promise.reject(c)}}};Cr.ConfigGet=ln});var pa=h(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.OrgDisplay=void 0;var tf=Er(),rf=Lr(),sf=Or(),pn=class{async getOrgInfo(e){let t=new tf.CliCommandExecutor(new sf.SfCommandBuilder().withArg("org:display").withJson().build(),{cwd:e}).execute(),n=await new rf.CommandOutput().getCmdResult(t);try{let i=JSON.parse(n).result;return Promise.resolve(i)}catch{return Promise.reject(n)}}};Ar.OrgDisplay=pn});var vt=h((Gm,fa)=>{var nf="2.0.0",of=Number.MAX_SAFE_INTEGER||9007199254740991,af=16,uf=256-6,cf=["major","premajor","minor","preminor","patch","prepatch","prerelease"];fa.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:af,MAX_SAFE_BUILD_LENGTH:uf,MAX_SAFE_INTEGER:of,RELEASE_TYPES:cf,SEMVER_SPEC_VERSION:nf,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var yt=h((Xm,ha)=>{var lf=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...s)=>console.error("SEMVER",...s):()=>{};ha.exports=lf});var We=h((Ee,da)=>{var{MAX_SAFE_COMPONENT_LENGTH:fn,MAX_SAFE_BUILD_LENGTH:pf,MAX_LENGTH:ff}=vt(),hf=yt();Ee=da.exports={};var df=Ee.re=[],gf=Ee.safeRe=[],S=Ee.src=[],x=Ee.t={},mf=0,hn="[a-zA-Z0-9-]",bf=[["\\s",1],["\\d",ff],[hn,pf]],Ef=s=>{for(let[e,t]of bf)s=s.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return s},F=(s,e,t)=>{let r=Ef(e),n=mf++;hf(s,n,e),x[s]=n,S[n]=e,df[n]=new RegExp(e,t?"g":void 0),gf[n]=new RegExp(r,t?"g":void 0)};F("NUMERICIDENTIFIER","0|[1-9]\\d*");F("NUMERICIDENTIFIERLOOSE","\\d+");F("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${hn}*`);F("MAINVERSION",`(${S[x.NUMERICIDENTIFIER]})\\.(${S[x.NUMERICIDENTIFIER]})\\.(${S[x.NUMERICIDENTIFIER]})`);F("MAINVERSIONLOOSE",`(${S[x.NUMERICIDENTIFIERLOOSE]})\\.(${S[x.NUMERICIDENTIFIERLOOSE]})\\.(${S[x.NUMERICIDENTIFIERLOOSE]})`);F("PRERELEASEIDENTIFIER",`(?:${S[x.NUMERICIDENTIFIER]}|${S[x.NONNUMERICIDENTIFIER]})`);F("PRERELEASEIDENTIFIERLOOSE",`(?:${S[x.NUMERICIDENTIFIERLOOSE]}|${S[x.NONNUMERICIDENTIFIER]})`);F("PRERELEASE",`(?:-(${S[x.PRERELEASEIDENTIFIER]}(?:\\.${S[x.PRERELEASEIDENTIFIER]})*))`);F("PRERELEASELOOSE",`(?:-?(${S[x.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${S[x.PRERELEASEIDENTIFIERLOOSE]})*))`);F("BUILDIDENTIFIER",`${hn}+`);F("BUILD",`(?:\\+(${S[x.BUILDIDENTIFIER]}(?:\\.${S[x.BUILDIDENTIFIER]})*))`);F("FULLPLAIN",`v?${S[x.MAINVERSION]}${S[x.PRERELEASE]}?${S[x.BUILD]}?`);F("FULL",`^${S[x.FULLPLAIN]}$`);F("LOOSEPLAIN",`[v=\\s]*${S[x.MAINVERSIONLOOSE]}${S[x.PRERELEASELOOSE]}?${S[x.BUILD]}?`);F("LOOSE",`^${S[x.LOOSEPLAIN]}$`);F("GTLT","((?:<|>)?=?)");F("XRANGEIDENTIFIERLOOSE",`${S[x.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);F("XRANGEIDENTIFIER",`${S[x.NUMERICIDENTIFIER]}|x|X|\\*`);F("XRANGEPLAIN",`[v=\\s]*(${S[x.XRANGEIDENTIFIER]})(?:\\.(${S[x.XRANGEIDENTIFIER]})(?:\\.(${S[x.XRANGEIDENTIFIER]})(?:${S[x.PRERELEASE]})?${S[x.BUILD]}?)?)?`);F("XRANGEPLAINLOOSE",`[v=\\s]*(${S[x.XRANGEIDENTIFIERLOOSE]})(?:\\.(${S[x.XRANGEIDENTIFIERLOOSE]})(?:\\.(${S[x.XRANGEIDENTIFIERLOOSE]})(?:${S[x.PRERELEASELOOSE]})?${S[x.BUILD]}?)?)?`);F("XRANGE",`^${S[x.GTLT]}\\s*${S[x.XRANGEPLAIN]}$`);F("XRANGELOOSE",`^${S[x.GTLT]}\\s*${S[x.XRANGEPLAINLOOSE]}$`);F("COERCEPLAIN",`(^|[^\\d])(\\d{1,${fn}})(?:\\.(\\d{1,${fn}}))?(?:\\.(\\d{1,${fn}}))?`);F("COERCE",`${S[x.COERCEPLAIN]}(?:$|[^\\d])`);F("COERCEFULL",S[x.COERCEPLAIN]+`(?:${S[x.PRERELEASE]})?(?:${S[x.BUILD]})?(?:$|[^\\d])`);F("COERCERTL",S[x.COERCE],!0);F("COERCERTLFULL",S[x.COERCEFULL],!0);F("LONETILDE","(?:~>?)");F("TILDETRIM",`(\\s*)${S[x.LONETILDE]}\\s+`,!0);Ee.tildeTrimReplace="$1~";F("TILDE",`^${S[x.LONETILDE]}${S[x.XRANGEPLAIN]}$`);F("TILDELOOSE",`^${S[x.LONETILDE]}${S[x.XRANGEPLAINLOOSE]}$`);F("LONECARET","(?:\\^)");F("CARETTRIM",`(\\s*)${S[x.LONECARET]}\\s+`,!0);Ee.caretTrimReplace="$1^";F("CARET",`^${S[x.LONECARET]}${S[x.XRANGEPLAIN]}$`);F("CARETLOOSE",`^${S[x.LONECARET]}${S[x.XRANGEPLAINLOOSE]}$`);F("COMPARATORLOOSE",`^${S[x.GTLT]}\\s*(${S[x.LOOSEPLAIN]})$|^$`);F("COMPARATOR",`^${S[x.GTLT]}\\s*(${S[x.FULLPLAIN]})$|^$`);F("COMPARATORTRIM",`(\\s*)${S[x.GTLT]}\\s*(${S[x.LOOSEPLAIN]}|${S[x.XRANGEPLAIN]})`,!0);Ee.comparatorTrimReplace="$1$2$3";F("HYPHENRANGE",`^\\s*(${S[x.XRANGEPLAIN]})\\s+-\\s+(${S[x.XRANGEPLAIN]})\\s*$`);F("HYPHENRANGELOOSE",`^\\s*(${S[x.XRANGEPLAINLOOSE]})\\s+-\\s+(${S[x.XRANGEPLAINLOOSE]})\\s*$`);F("STAR","(<|>)?=?\\s*\\*");F("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");F("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Ir=h((zm,ga)=>{var _f=Object.freeze({loose:!0}),vf=Object.freeze({}),yf=s=>s?typeof s!="object"?_f:s:vf;ga.exports=yf});var dn=h((Ym,Ea)=>{var ma=/^[0-9]+$/,ba=(s,e)=>{let t=ma.test(s),r=ma.test(e);return t&&r&&(s=+s,e=+e),s===e?0:t&&!r?-1:r&&!t?1:s<e?-1:1},Rf=(s,e)=>ba(e,s);Ea.exports={compareIdentifiers:ba,rcompareIdentifiers:Rf}});var Z=h((Jm,Ra)=>{var wr=yt(),{MAX_LENGTH:_a,MAX_SAFE_INTEGER:Pr}=vt(),{safeRe:va,t:ya}=We(),Sf=Ir(),{compareIdentifiers:Ke}=dn(),ue=class{constructor(e,t){if(t=Sf(t),e instanceof ue){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>_a)throw new TypeError(`version is longer than ${_a} characters`);wr("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?va[ya.LOOSE]:va[ya.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Pr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Pr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Pr||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let i=+n;if(i>=0&&i<Pr)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(wr("SemVer.compare",this.version,this.options,e),!(e instanceof ue)){if(typeof e=="string"&&e===this.version)return 0;e=new ue(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof ue||(e=new ue(e,this.options)),Ke(this.major,e.major)||Ke(this.minor,e.minor)||Ke(this.patch,e.patch)}comparePre(e){if(e instanceof ue||(e=new ue(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],n=e.prerelease[t];if(wr("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Ke(r,n)}while(++t)}compareBuild(e){e instanceof ue||(e=new ue(e,this.options));let t=0;do{let r=this.build[t],n=e.build[t];if(wr("build compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Ke(r,n)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(r)?1:0;if(!t&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[n];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(t===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(t){let i=[t,n];r===!1&&(i=[t]),Ke(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Ra.exports=ue});var we=h((Wm,xa)=>{var Sa=Z(),xf=(s,e,t=!1)=>{if(s instanceof Sa)return s;try{return new Sa(s,e)}catch(r){if(!t)return null;throw r}};xa.exports=xf});var Ta=h((Km,La)=>{var Lf=we(),Tf=(s,e)=>{let t=Lf(s,e);return t?t.version:null};La.exports=Tf});var Ca=h((Qm,Oa)=>{var Of=we(),Cf=(s,e)=>{let t=Of(s.trim().replace(/^[=v]+/,""),e);return t?t.version:null};Oa.exports=Cf});var wa=h((Zm,Ia)=>{var Aa=Z(),Af=(s,e,t,r,n)=>{typeof t=="string"&&(n=r,r=t,t=void 0);try{return new Aa(s instanceof Aa?s.version:s,t).inc(e,r,n).version}catch{return null}};Ia.exports=Af});var Da=h((eb,Na)=>{var Pa=we(),If=(s,e)=>{let t=Pa(s,null,!0),r=Pa(e,null,!0),n=t.compare(r);if(n===0)return null;let i=n>0,o=i?t:r,c=i?r:t,a=!!o.prerelease.length;if(!!c.prerelease.length&&!a)return!c.patch&&!c.minor?"major":o.patch?"patch":o.minor?"minor":"major";let l=a?"pre":"";return t.major!==r.major?l+"major":t.minor!==r.minor?l+"minor":t.patch!==r.patch?l+"patch":"prerelease"};Na.exports=If});var qa=h((tb,Fa)=>{var wf=Z(),Pf=(s,e)=>new wf(s,e).major;Fa.exports=Pf});var Va=h((rb,Ma)=>{var Nf=Z(),Df=(s,e)=>new Nf(s,e).minor;Ma.exports=Df});var ka=h((sb,$a)=>{var Ff=Z(),qf=(s,e)=>new Ff(s,e).patch;$a.exports=qf});var Ua=h((nb,ja)=>{var Mf=we(),Vf=(s,e)=>{let t=Mf(s,e);return t&&t.prerelease.length?t.prerelease:null};ja.exports=Vf});var pe=h((ib,Ba)=>{var Ha=Z(),$f=(s,e,t)=>new Ha(s,t).compare(new Ha(e,t));Ba.exports=$f});var Xa=h((ob,Ga)=>{var kf=pe(),jf=(s,e,t)=>kf(e,s,t);Ga.exports=jf});var Ya=h((ab,za)=>{var Uf=pe(),Hf=(s,e)=>Uf(s,e,!0);za.exports=Hf});var Nr=h((ub,Wa)=>{var Ja=Z(),Bf=(s,e,t)=>{let r=new Ja(s,t),n=new Ja(e,t);return r.compare(n)||r.compareBuild(n)};Wa.exports=Bf});var Qa=h((cb,Ka)=>{var Gf=Nr(),Xf=(s,e)=>s.sort((t,r)=>Gf(t,r,e));Ka.exports=Xf});var eu=h((lb,Za)=>{var zf=Nr(),Yf=(s,e)=>s.sort((t,r)=>zf(r,t,e));Za.exports=Yf});var Rt=h((pb,tu)=>{var Jf=pe(),Wf=(s,e,t)=>Jf(s,e,t)>0;tu.exports=Wf});var Dr=h((fb,ru)=>{var Kf=pe(),Qf=(s,e,t)=>Kf(s,e,t)<0;ru.exports=Qf});var gn=h((hb,su)=>{var Zf=pe(),eh=(s,e,t)=>Zf(s,e,t)===0;su.exports=eh});var mn=h((db,nu)=>{var th=pe(),rh=(s,e,t)=>th(s,e,t)!==0;nu.exports=rh});var Fr=h((gb,iu)=>{var sh=pe(),nh=(s,e,t)=>sh(s,e,t)>=0;iu.exports=nh});var qr=h((mb,ou)=>{var ih=pe(),oh=(s,e,t)=>ih(s,e,t)<=0;ou.exports=oh});var bn=h((bb,au)=>{var ah=gn(),uh=mn(),ch=Rt(),lh=Fr(),ph=Dr(),fh=qr(),hh=(s,e,t,r)=>{switch(e){case"===":return typeof s=="object"&&(s=s.version),typeof t=="object"&&(t=t.version),s===t;case"!==":return typeof s=="object"&&(s=s.version),typeof t=="object"&&(t=t.version),s!==t;case"":case"=":case"==":return ah(s,t,r);case"!=":return uh(s,t,r);case">":return ch(s,t,r);case">=":return lh(s,t,r);case"<":return ph(s,t,r);case"<=":return fh(s,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};au.exports=hh});var cu=h((Eb,uu)=>{var dh=Z(),gh=we(),{safeRe:Mr,t:Vr}=We(),mh=(s,e)=>{if(s instanceof dh)return s;if(typeof s=="number"&&(s=String(s)),typeof s!="string")return null;e=e||{};let t=null;if(!e.rtl)t=s.match(e.includePrerelease?Mr[Vr.COERCEFULL]:Mr[Vr.COERCE]);else{let a=e.includePrerelease?Mr[Vr.COERCERTLFULL]:Mr[Vr.COERCERTL],u;for(;(u=a.exec(s))&&(!t||t.index+t[0].length!==s.length);)(!t||u.index+u[0].length!==t.index+t[0].length)&&(t=u),a.lastIndex=u.index+u[1].length+u[2].length;a.lastIndex=-1}if(t===null)return null;let r=t[2],n=t[3]||"0",i=t[4]||"0",o=e.includePrerelease&&t[5]?`-${t[5]}`:"",c=e.includePrerelease&&t[6]?`+${t[6]}`:"";return gh(`${r}.${n}.${i}${o}${c}`,e)};uu.exports=mh});var pu=h((_b,lu)=>{var En=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let n=this.map.keys().next().value;this.delete(n)}this.map.set(e,t)}return this}};lu.exports=En});var fe=h((vb,gu)=>{var bh=/\s+/g,Pe=class{constructor(e,t){if(t=_h(t),e instanceof Pe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Pe(e.raw,t);if(e instanceof _n)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(bh," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(n=>!hu(n[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let n of this.set)if(n.length===1&&Th(n[0])){this.set=[n];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let r=0;r<t.length;r++)r>0&&(this.formatted+=" "),this.formatted+=t[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&xh)|(this.options.loose&&Lh))+":"+e,n=fu.get(r);if(n)return n;let i=this.options.loose,o=i?se[te.HYPHENRANGELOOSE]:se[te.HYPHENRANGE];e=e.replace(o,qh(this.options.includePrerelease)),G("hyphen replace",e),e=e.replace(se[te.COMPARATORTRIM],yh),G("comparator trim",e),e=e.replace(se[te.TILDETRIM],Rh),G("tilde trim",e),e=e.replace(se[te.CARETTRIM],Sh),G("caret trim",e);let c=e.split(" ").map(p=>Oh(p,this.options)).join(" ").split(/\s+/).map(p=>Fh(p,this.options));i&&(c=c.filter(p=>(G("loose invalid filter",p,this.options),!!p.match(se[te.COMPARATORLOOSE])))),G("range list",c);let a=new Map,u=c.map(p=>new _n(p,this.options));for(let p of u){if(hu(p))return[p];a.set(p.value,p)}a.size>1&&a.has("")&&a.delete("");let l=[...a.values()];return fu.set(r,l),l}intersects(e,t){if(!(e instanceof Pe))throw new TypeError("a Range is required");return this.set.some(r=>du(r,t)&&e.set.some(n=>du(n,t)&&r.every(i=>n.every(o=>i.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new vh(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(Mh(this.set[t],e,this.options))return!0;return!1}};gu.exports=Pe;var Eh=pu(),fu=new Eh,_h=Ir(),_n=St(),G=yt(),vh=Z(),{safeRe:se,t:te,comparatorTrimReplace:yh,tildeTrimReplace:Rh,caretTrimReplace:Sh}=We(),{FLAG_INCLUDE_PRERELEASE:xh,FLAG_LOOSE:Lh}=vt(),hu=s=>s.value==="<0.0.0-0",Th=s=>s.value==="",du=(s,e)=>{let t=!0,r=s.slice(),n=r.pop();for(;t&&r.length;)t=r.every(i=>n.intersects(i,e)),n=r.pop();return t},Oh=(s,e)=>(G("comp",s,e),s=Ih(s,e),G("caret",s),s=Ch(s,e),G("tildes",s),s=Ph(s,e),G("xrange",s),s=Dh(s,e),G("stars",s),s),re=s=>!s||s.toLowerCase()==="x"||s==="*",Ch=(s,e)=>s.trim().split(/\s+/).map(t=>Ah(t,e)).join(" "),Ah=(s,e)=>{let t=e.loose?se[te.TILDELOOSE]:se[te.TILDE];return s.replace(t,(r,n,i,o,c)=>{G("tilde",s,r,n,i,o,c);let a;return re(n)?a="":re(i)?a=`>=${n}.0.0 <${+n+1}.0.0-0`:re(o)?a=`>=${n}.${i}.0 <${n}.${+i+1}.0-0`:c?(G("replaceTilde pr",c),a=`>=${n}.${i}.${o}-${c} <${n}.${+i+1}.0-0`):a=`>=${n}.${i}.${o} <${n}.${+i+1}.0-0`,G("tilde return",a),a})},Ih=(s,e)=>s.trim().split(/\s+/).map(t=>wh(t,e)).join(" "),wh=(s,e)=>{G("caret",s,e);let t=e.loose?se[te.CARETLOOSE]:se[te.CARET],r=e.includePrerelease?"-0":"";return s.replace(t,(n,i,o,c,a)=>{G("caret",s,n,i,o,c,a);let u;return re(i)?u="":re(o)?u=`>=${i}.0.0${r} <${+i+1}.0.0-0`:re(c)?i==="0"?u=`>=${i}.${o}.0${r} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.0${r} <${+i+1}.0.0-0`:a?(G("replaceCaret pr",a),i==="0"?o==="0"?u=`>=${i}.${o}.${c}-${a} <${i}.${o}.${+c+1}-0`:u=`>=${i}.${o}.${c}-${a} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${c}-${a} <${+i+1}.0.0-0`):(G("no pr"),i==="0"?o==="0"?u=`>=${i}.${o}.${c}${r} <${i}.${o}.${+c+1}-0`:u=`>=${i}.${o}.${c}${r} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${c} <${+i+1}.0.0-0`),G("caret return",u),u})},Ph=(s,e)=>(G("replaceXRanges",s,e),s.split(/\s+/).map(t=>Nh(t,e)).join(" ")),Nh=(s,e)=>{s=s.trim();let t=e.loose?se[te.XRANGELOOSE]:se[te.XRANGE];return s.replace(t,(r,n,i,o,c,a)=>{G("xRange",s,r,n,i,o,c,a);let u=re(i),l=u||re(o),p=l||re(c),f=p;return n==="="&&f&&(n=""),a=e.includePrerelease?"-0":"",u?n===">"||n==="<"?r="<0.0.0-0":r="*":n&&f?(l&&(o=0),c=0,n===">"?(n=">=",l?(i=+i+1,o=0,c=0):(o=+o+1,c=0)):n==="<="&&(n="<",l?i=+i+1:o=+o+1),n==="<"&&(a="-0"),r=`${n+i}.${o}.${c}${a}`):l?r=`>=${i}.0.0${a} <${+i+1}.0.0-0`:p&&(r=`>=${i}.${o}.0${a} <${i}.${+o+1}.0-0`),G("xRange return",r),r})},Dh=(s,e)=>(G("replaceStars",s,e),s.trim().replace(se[te.STAR],"")),Fh=(s,e)=>(G("replaceGTE0",s,e),s.trim().replace(se[e.includePrerelease?te.GTE0PRE:te.GTE0],"")),qh=s=>(e,t,r,n,i,o,c,a,u,l,p,f)=>(re(r)?t="":re(n)?t=`>=${r}.0.0${s?"-0":""}`:re(i)?t=`>=${r}.${n}.0${s?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${s?"-0":""}`,re(u)?a="":re(l)?a=`<${+u+1}.0.0-0`:re(p)?a=`<${u}.${+l+1}.0-0`:f?a=`<=${u}.${l}.${p}-${f}`:s?a=`<${u}.${l}.${+p+1}-0`:a=`<=${a}`,`${t} ${a}`.trim()),Mh=(s,e,t)=>{for(let r=0;r<s.length;r++)if(!s[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<s.length;r++)if(G(s[r].semver),s[r].semver!==_n.ANY&&s[r].semver.prerelease.length>0){let n=s[r].semver;if(n.major===e.major&&n.minor===e.minor&&n.patch===e.patch)return!0}return!1}return!0}});var St=h((yb,yu)=>{var xt=Symbol("SemVer ANY"),Qe=class{static get ANY(){return xt}constructor(e,t){if(t=mu(t),e instanceof Qe){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),yn("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===xt?this.value="":this.value=this.operator+this.semver.version,yn("comp",this)}parse(e){let t=this.options.loose?bu[Eu.COMPARATORLOOSE]:bu[Eu.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new _u(r[2],this.options.loose):this.semver=xt}toString(){return this.value}test(e){if(yn("Comparator.test",e,this.options.loose),this.semver===xt||e===xt)return!0;if(typeof e=="string")try{e=new _u(e,this.options)}catch{return!1}return vn(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Qe))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new vu(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new vu(this.value,t).test(e.semver):(t=mu(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||vn(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||vn(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};yu.exports=Qe;var mu=Ir(),{safeRe:bu,t:Eu}=We(),vn=bn(),yn=yt(),_u=Z(),vu=fe()});var Lt=h((Rb,Ru)=>{var Vh=fe(),$h=(s,e,t)=>{try{e=new Vh(e,t)}catch{return!1}return e.test(s)};Ru.exports=$h});var xu=h((Sb,Su)=>{var kh=fe(),jh=(s,e)=>new kh(s,e).set.map(t=>t.map(r=>r.value).join(" ").trim().split(" "));Su.exports=jh});var Tu=h((xb,Lu)=>{var Uh=Z(),Hh=fe(),Bh=(s,e,t)=>{let r=null,n=null,i=null;try{i=new Hh(e,t)}catch{return null}return s.forEach(o=>{i.test(o)&&(!r||n.compare(o)===-1)&&(r=o,n=new Uh(r,t))}),r};Lu.exports=Bh});var Cu=h((Lb,Ou)=>{var Gh=Z(),Xh=fe(),zh=(s,e,t)=>{let r=null,n=null,i=null;try{i=new Xh(e,t)}catch{return null}return s.forEach(o=>{i.test(o)&&(!r||n.compare(o)===1)&&(r=o,n=new Gh(r,t))}),r};Ou.exports=zh});var wu=h((Tb,Iu)=>{var Rn=Z(),Yh=fe(),Au=Rt(),Jh=(s,e)=>{s=new Yh(s,e);let t=new Rn("0.0.0");if(s.test(t)||(t=new Rn("0.0.0-0"),s.test(t)))return t;t=null;for(let r=0;r<s.set.length;++r){let n=s.set[r],i=null;n.forEach(o=>{let c=new Rn(o.semver.version);switch(o.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!i||Au(c,i))&&(i=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!t||Au(t,i))&&(t=i)}return t&&s.test(t)?t:null};Iu.exports=Jh});var Nu=h((Ob,Pu)=>{var Wh=fe(),Kh=(s,e)=>{try{return new Wh(s,e).range||"*"}catch{return null}};Pu.exports=Kh});var $r=h((Cb,Mu)=>{var Qh=Z(),qu=St(),{ANY:Zh}=qu,ed=fe(),td=Lt(),Du=Rt(),Fu=Dr(),rd=qr(),sd=Fr(),nd=(s,e,t,r)=>{s=new Qh(s,r),e=new ed(e,r);let n,i,o,c,a;switch(t){case">":n=Du,i=rd,o=Fu,c=">",a=">=";break;case"<":n=Fu,i=sd,o=Du,c="<",a="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(td(s,e,r))return!1;for(let u=0;u<e.set.length;++u){let l=e.set[u],p=null,f=null;if(l.forEach(d=>{d.semver===Zh&&(d=new qu(">=0.0.0")),p=p||d,f=f||d,n(d.semver,p.semver,r)?p=d:o(d.semver,f.semver,r)&&(f=d)}),p.operator===c||p.operator===a||(!f.operator||f.operator===c)&&i(s,f.semver))return!1;if(f.operator===a&&o(s,f.semver))return!1}return!0};Mu.exports=nd});var $u=h((Ab,Vu)=>{var id=$r(),od=(s,e,t)=>id(s,e,">",t);Vu.exports=od});var ju=h((Ib,ku)=>{var ad=$r(),ud=(s,e,t)=>ad(s,e,"<",t);ku.exports=ud});var Bu=h((wb,Hu)=>{var Uu=fe(),cd=(s,e,t)=>(s=new Uu(s,t),e=new Uu(e,t),s.intersects(e,t));Hu.exports=cd});var Xu=h((Pb,Gu)=>{var ld=Lt(),pd=pe();Gu.exports=(s,e,t)=>{let r=[],n=null,i=null,o=s.sort((l,p)=>pd(l,p,t));for(let l of o)ld(l,e,t)?(i=l,n||(n=l)):(i&&r.push([n,i]),i=null,n=null);n&&r.push([n,null]);let c=[];for(let[l,p]of r)l===p?c.push(l):!p&&l===o[0]?c.push("*"):p?l===o[0]?c.push(`<=${p}`):c.push(`${l} - ${p}`):c.push(`>=${l}`);let a=c.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return a.length<u.length?a:e}});var Qu=h((Nb,Ku)=>{var zu=fe(),xn=St(),{ANY:Sn}=xn,Tt=Lt(),Ln=pe(),fd=(s,e,t={})=>{if(s===e)return!0;s=new zu(s,t),e=new zu(e,t);let r=!1;e:for(let n of s.set){for(let i of e.set){let o=dd(n,i,t);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},hd=[new xn(">=0.0.0-0")],Yu=[new xn(">=0.0.0")],dd=(s,e,t)=>{if(s===e)return!0;if(s.length===1&&s[0].semver===Sn){if(e.length===1&&e[0].semver===Sn)return!0;t.includePrerelease?s=hd:s=Yu}if(e.length===1&&e[0].semver===Sn){if(t.includePrerelease)return!0;e=Yu}let r=new Set,n,i;for(let d of s)d.operator===">"||d.operator===">="?n=Ju(n,d,t):d.operator==="<"||d.operator==="<="?i=Wu(i,d,t):r.add(d.semver);if(r.size>1)return null;let o;if(n&&i){if(o=Ln(n.semver,i.semver,t),o>0)return null;if(o===0&&(n.operator!==">="||i.operator!=="<="))return null}for(let d of r){if(n&&!Tt(d,String(n),t)||i&&!Tt(d,String(i),t))return null;for(let g of e)if(!Tt(d,String(g),t))return!1;return!0}let c,a,u,l,p=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1,f=n&&!t.includePrerelease&&n.semver.prerelease.length?n.semver:!1;p&&p.prerelease.length===1&&i.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let d of e){if(l=l||d.operator===">"||d.operator===">=",u=u||d.operator==="<"||d.operator==="<=",n){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator===">"||d.operator===">="){if(c=Ju(n,d,t),c===d&&c!==n)return!1}else if(n.operator===">="&&!Tt(n.semver,String(d),t))return!1}if(i){if(p&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===p.major&&d.semver.minor===p.minor&&d.semver.patch===p.patch&&(p=!1),d.operator==="<"||d.operator==="<="){if(a=Wu(i,d,t),a===d&&a!==i)return!1}else if(i.operator==="<="&&!Tt(i.semver,String(d),t))return!1}if(!d.operator&&(i||n)&&o!==0)return!1}return!(n&&u&&!i&&o!==0||i&&l&&!n&&o!==0||f||p)},Ju=(s,e,t)=>{if(!s)return e;let r=Ln(s.semver,e.semver,t);return r>0?s:r<0||e.operator===">"&&s.operator===">="?e:s},Wu=(s,e,t)=>{if(!s)return e;let r=Ln(s.semver,e.semver,t);return r<0?s:r>0||e.operator==="<"&&s.operator==="<="?e:s};Ku.exports=fd});var rc=h((Db,tc)=>{var Tn=We(),Zu=vt(),gd=Z(),ec=dn(),md=we(),bd=Ta(),Ed=Ca(),_d=wa(),vd=Da(),yd=qa(),Rd=Va(),Sd=ka(),xd=Ua(),Ld=pe(),Td=Xa(),Od=Ya(),Cd=Nr(),Ad=Qa(),Id=eu(),wd=Rt(),Pd=Dr(),Nd=gn(),Dd=mn(),Fd=Fr(),qd=qr(),Md=bn(),Vd=cu(),$d=St(),kd=fe(),jd=Lt(),Ud=xu(),Hd=Tu(),Bd=Cu(),Gd=wu(),Xd=Nu(),zd=$r(),Yd=$u(),Jd=ju(),Wd=Bu(),Kd=Xu(),Qd=Qu();tc.exports={parse:md,valid:bd,clean:Ed,inc:_d,diff:vd,major:yd,minor:Rd,patch:Sd,prerelease:xd,compare:Ld,rcompare:Td,compareLoose:Od,compareBuild:Cd,sort:Ad,rsort:Id,gt:wd,lt:Pd,eq:Nd,neq:Dd,gte:Fd,lte:qd,cmp:Md,coerce:Vd,Comparator:$d,Range:kd,satisfies:jd,toComparators:Ud,maxSatisfying:Hd,minSatisfying:Bd,minVersion:Gd,validRange:Xd,outside:zd,gtr:Yd,ltr:Jd,intersects:Wd,simplifyRange:Kd,subset:Qd,SemVer:gd,re:Tn.re,src:Tn.src,tokens:Tn.t,SEMVER_SPEC_VERSION:Zu.SEMVER_SPEC_VERSION,RELEASE_TYPES:Zu.RELEASE_TYPES,compareIdentifiers:ec.compareIdentifiers,rcompareIdentifiers:ec.rcompareIdentifiers}});var sc=h(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.CliVersionStatus=Ze.CliStatusEnum=void 0;var Zd=require("child_process"),Se=rc(),xe;(function(s){s[s.SFv2=1]="SFv2",s[s.outdatedSFDXVersion=2]="outdatedSFDXVersion",s[s.onlySFv1=3]="onlySFv1",s[s.cliNotInstalled=4]="cliNotInstalled",s[s.bothSFDXAndSFInstalled=5]="bothSFDXAndSFInstalled",s[s.SFDXv7Valid=6]="SFDXv7Valid"})(xe||(Ze.CliStatusEnum=xe={}));var On=class{getCliVersion(e){try{return(0,Zd.execSync)(`${e?"sfdx":"sf"} --version`).toString()}catch{return"No CLI"}}parseCliVersion(e){let r=/(?:sfdx-cli\/|@salesforce\/cli\/)(\d+\.\d+\.\d+)/.exec(e);return r?r[1]:"0.0.0"}validateCliInstallationAndVersion(e,t){if(Se.satisfies(e,"0.0.0")&&Se.satisfies(t,"0.0.0"))return xe.cliNotInstalled;if(Se.satisfies(e,"0.0.0")&&Se.satisfies(t,"1.x"))return xe.onlySFv1;if(Se.satisfies(t,"2.x")&&!Se.satisfies(e,t))return xe.bothSFDXAndSFInstalled;let r="7.193.2";return Se.satisfies(t,"<2.0.0")?Se.satisfies(e,`<${r}`)?xe.outdatedSFDXVersion:xe.SFDXv7Valid:xe.SFv2}};Ze.CliVersionStatus=On});var ic=h(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.CliVersionStatus=z.CliStatusEnum=z.SfCommandBuilder=z.OrgDisplay=z.GlobalCliEnvironment=z.ConfigGet=z.CommandOutput=z.CommandBuilder=z.CliCommandExecutor=z.CliCommandExecution=void 0;var eg=Xs();Object.defineProperty(z,"CliCommandExecution",{enumerable:!0,get:function(){return eg.CliCommandExecution}});var tg=Er();Object.defineProperty(z,"CliCommandExecutor",{enumerable:!0,get:function(){return tg.CliCommandExecutor}});var rg=vr();Object.defineProperty(z,"CommandBuilder",{enumerable:!0,get:function(){return rg.CommandBuilder}});var sg=Lr();Object.defineProperty(z,"CommandOutput",{enumerable:!0,get:function(){return sg.CommandOutput}});var ng=la();Object.defineProperty(z,"ConfigGet",{enumerable:!0,get:function(){return ng.ConfigGet}});var ig=sn();Object.defineProperty(z,"GlobalCliEnvironment",{enumerable:!0,get:function(){return ig.GlobalCliEnvironment}});var og=pa();Object.defineProperty(z,"OrgDisplay",{enumerable:!0,get:function(){return og.OrgDisplay}});var ag=Or();Object.defineProperty(z,"SfCommandBuilder",{enumerable:!0,get:function(){return ag.SfCommandBuilder}});var nc=sc();Object.defineProperty(z,"CliStatusEnum",{enumerable:!0,get:function(){return nc.CliStatusEnum}});Object.defineProperty(z,"CliVersionStatus",{enumerable:!0,get:function(){return nc.CliVersionStatus}})});var oc=h(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.Localization=void 0;var Cn=class{constructor(e){this.delegate=e}localize(e,...t){return this.delegate.localize(e,...t)}};kr.Localization=Cn});var ac=h(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.Message=void 0;var ug=require("util"),cg=Je(),An=class{constructor(e,t){this.messages=e,this.delegate=t}localize(e,...t){let r=this.getLabel(e);if(!r)return console.warn(`Missing label for key: ${e}`),r=`${cg.MISSING_LABEL_MSG} ${e}`,t.length>=1&&t.forEach(i=>{r+=` (${i})`}),r;let n=t;if(t.length>=1){let i=r.split("%s").length-1;return t.length!==i&&(console.log(`Arguments do not match for label '${e}', got ${t.length} but want ${i}`),t.length>i&&(n=t.slice(0,-(t.length-i)))),(0,ug.format)(r,...n)}return r}getLabel(e){return this.messages[e]?this.messages[e]:this.delegate?this.delegate.messages[e]:void 0}};jr.Message=An});var uc=h(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.Message=et.Localization=void 0;var lg=oc();Object.defineProperty(et,"Localization",{enumerable:!0,get:function(){return lg.Localization}});var pg=ac();Object.defineProperty(et,"Message",{enumerable:!0,get:function(){return pg.Message}})});var cc=h(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.BaseCommand=void 0;var In=class{constructor(e){this.queryString=e}getQueryString(){return this.queryString}};Ur.BaseCommand=In});var pc=h(lc=>{(()=>{var s={46:(i,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(c,a,{signal:u}={}){return new Promise((l,p)=>{function f(){u?.removeEventListener("abort",f),c.removeListener(a,d),c.removeListener("error",g)}function d(...E){f(),l(E)}function g(E){f(),p(E)}u?.addEventListener("abort",f),c.on(a,d),c.on("error",g)})}},54:function(i,o,c){"use strict";var a=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};let u=c(361),l=a(c(374)),p=a(c(304)),f=l.default("agent-base");function d(){let{stack:E}=new Error;return typeof E=="string"&&E.split(`
`).some(N=>N.indexOf("(https.js:")!==-1||N.indexOf("node:https:")!==-1)}function g(E,N){return new g.Agent(E,N)}(function(E){class N extends u.EventEmitter{constructor(O,v){super();let _=v;typeof O=="function"?this.callback=O:O&&(_=O),this.timeout=null,_&&typeof _.timeout=="number"&&(this.timeout=_.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:d()?443:80}set defaultPort(O){this.explicitDefaultPort=O}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:d()?"https:":"http:"}set protocol(O){this.explicitProtocol=O}callback(O,v,_){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(O,v){let _=Object.assign({},v);typeof _.secureEndpoint!="boolean"&&(_.secureEndpoint=d()),_.host==null&&(_.host="localhost"),_.port==null&&(_.port=_.secureEndpoint?443:80),_.protocol==null&&(_.protocol=_.secureEndpoint?"https:":"http:"),_.host&&_.path&&delete _.path,delete _.agent,delete _.hostname,delete _._defaultAgent,delete _.defaultPort,delete _.createConnection,O._last=!0,O.shouldKeepAlive=!1;let I=!1,q=null,C=_.timeout||this.timeout,b=R=>{O._hadError||(O.emit("error",R),O._hadError=!0)},m=()=>{q=null,I=!0;let R=new Error(`A "socket" was not created for HTTP request before ${C}ms`);R.code="ETIMEOUT",b(R)},y=R=>{I||(q!==null&&(clearTimeout(q),q=null),b(R))},w=R=>{if(I)return;if(q!=null&&(clearTimeout(q),q=null),T=R,Boolean(T)&&typeof T.addRequest=="function")return f("Callback returned another Agent instance %o",R.constructor.name),void R.addRequest(O,_);var T;if(R)return R.once("free",()=>{this.freeSocket(R,_)}),void O.onSocket(R);let P=new Error(`no Duplex stream was returned to agent-base for \`${O.method} ${O.path}\``);b(P)};if(typeof this.callback=="function"){this.promisifiedCallback||(this.callback.length>=3?(f("Converting legacy callback function to promise"),this.promisifiedCallback=p.default(this.callback)):this.promisifiedCallback=this.callback),typeof C=="number"&&C>0&&(q=setTimeout(m,C)),"port"in _&&typeof _.port!="number"&&(_.port=Number(_.port));try{f("Resolving socket for %o request: %o",_.protocol,`${O.method} ${O.path}`),Promise.resolve(this.promisifiedCallback(O,_)).then(w,y)}catch(R){Promise.reject(R).catch(y)}}else b(new Error("`callback` is not defined"))}freeSocket(O,v){f("Freeing socket %o %o",O.constructor.name,v),O.destroy()}destroy(){f("Destroying agent %o",this.constructor.name)}}E.Agent=N,E.prototype=E.Agent.prototype})(g||(g={})),i.exports=g},304:(i,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(c){return function(a,u){return new Promise((l,p)=>{c.call(this,a,u,(f,d)=>{f?p(f):l(d)})})}}},370:function(i,o,c){"use strict";var a=this&&this.__awaiter||function(O,v,_,I){return new(_||(_=Promise))(function(q,C){function b(w){try{y(I.next(w))}catch(R){C(R)}}function m(w){try{y(I.throw(w))}catch(R){C(R)}}function y(w){var R;w.done?q(w.value):(R=w.value,R instanceof _?R:new _(function(T){T(R)})).then(b,m)}y((I=I.apply(O,v||[])).next())})},u=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(o,"__esModule",{value:!0});let l=u(c(808)),p=u(c(404)),f=u(c(310)),d=u(c(374)),g=u(c(46)),E=c(54),N=(0,d.default)("http-proxy-agent");class V extends E.Agent{constructor(v){let _;if(_=typeof v=="string"?f.default.parse(v):v,!_)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");N("Creating new HttpProxyAgent instance: %o",_),super(_);let I=Object.assign({},_);var q;this.secureProxy=_.secureProxy||typeof(q=I.protocol)=="string"&&/^https:?$/i.test(q),I.host=I.hostname||I.host,typeof I.port=="string"&&(I.port=parseInt(I.port,10)),!I.port&&I.host&&(I.port=this.secureProxy?443:80),I.host&&I.path&&(delete I.path,delete I.pathname),this.proxy=I}callback(v,_){return a(this,void 0,void 0,function*(){let{proxy:I,secureProxy:q}=this,C=f.default.parse(v.path),b;if(C.protocol||(C.protocol="http:"),C.hostname||(C.hostname=_.hostname||_.host||null),C.port==null&&(_.port,1)&&(C.port=String(_.port)),C.port==="80"&&(C.port=""),v.path=f.default.format(C),I.auth&&v.setHeader("Proxy-Authorization",`Basic ${Buffer.from(I.auth).toString("base64")}`),q?(N("Creating `tls.Socket`: %o",I),b=p.default.connect(I)):(N("Creating `net.Socket`: %o",I),b=l.default.connect(I)),v._header){let m,y;N("Regenerating stored HTTP header string for request"),v._header=null,v._implicitHeader(),v.output&&v.output.length>0?(N("Patching connection write() output buffer with updated header"),m=v.output[0],y=m.indexOf(`\r
\r
`)+4,v.output[0]=v._header+m.substring(y),N("Output buffer: %o",v.output)):v.outputData&&v.outputData.length>0&&(N("Patching connection write() output buffer with updated header"),m=v.outputData[0].data,y=m.indexOf(`\r
\r
`)+4,v.outputData[0].data=v._header+m.substring(y),N("Output buffer: %o",v.outputData[0].data))}return yield(0,g.default)(b,"connect"),b})}}o.default=V},201:function(i,o,c){"use strict";let a=(this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}})(c(370));function u(l){return new a.default(l)}(function(l){l.HttpProxyAgent=a.default,l.prototype=a.default.prototype})(u||(u={})),i.exports=u},146:function(i,o,c){"use strict";var a=this&&this.__awaiter||function(_,I,q,C){return new(q||(q=Promise))(function(b,m){function y(T){try{R(C.next(T))}catch(P){m(P)}}function w(T){try{R(C.throw(T))}catch(P){m(P)}}function R(T){var P;T.done?b(T.value):(P=T.value,P instanceof q?P:new q(function(M){M(P)})).then(y,w)}R((C=C.apply(_,I||[])).next())})},u=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(o,"__esModule",{value:!0});let l=u(c(808)),p=u(c(404)),f=u(c(310)),d=u(c(491)),g=u(c(374)),E=c(54),N=u(c(829)),V=g.default("https-proxy-agent:agent");class O extends E.Agent{constructor(I){let q;if(q=typeof I=="string"?f.default.parse(I):I,!q)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");V("creating new HttpsProxyAgent instance: %o",q),super(q);let C=Object.assign({},q);var b;this.secureProxy=q.secureProxy||typeof(b=C.protocol)=="string"&&/^https:?$/i.test(b),C.host=C.hostname||C.host,typeof C.port=="string"&&(C.port=parseInt(C.port,10)),!C.port&&C.host&&(C.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in C)&&(C.ALPNProtocols=["http 1.1"]),C.host&&C.path&&(delete C.path,delete C.pathname),this.proxy=C}callback(I,q){return a(this,void 0,void 0,function*(){let{proxy:C,secureProxy:b}=this,m;b?(V("Creating `tls.Socket`: %o",C),m=p.default.connect(C)):(V("Creating `net.Socket`: %o",C),m=l.default.connect(C));let y=Object.assign({},C.headers),w=`CONNECT ${q.host}:${q.port} HTTP/1.1\r
`;C.auth&&(y["Proxy-Authorization"]=`Basic ${Buffer.from(C.auth).toString("base64")}`);let{host:R,port:T,secureEndpoint:P}=q;(function($,B){return Boolean(!B&&$===80||B&&$===443)})(T,P)||(R+=`:${T}`),y.Host=R,y.Connection="close";for(let $ of Object.keys(y))w+=`${$}: ${y[$]}\r
`;let M=N.default(m);m.write(`${w}\r
`);let{statusCode:W,buffered:ee}=yield M;if(W===200){if(I.once("socket",v),q.secureEndpoint){V("Upgrading socket connection to TLS");let $=q.servername||q.host;return p.default.connect(Object.assign(Object.assign({},function(B,...j){let X={},K;for(K in B)j.includes(K)||(X[K]=B[K]);return X}(q,"host","hostname","path","port")),{socket:m,servername:$}))}return m}m.destroy();let Y=new l.default.Socket({writable:!1});return Y.readable=!0,I.once("socket",$=>{V("replaying proxy buffer for failed request"),d.default($.listenerCount("data")>0),$.push(ee),$.push(null)}),Y})}}function v(_){_.resume()}o.default=O},18:function(i,o,c){"use strict";let a=(this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}})(c(146));function u(l){return new a.default(l)}(function(l){l.HttpsProxyAgent=a.default,l.prototype=a.default.prototype})(u||(u={})),i.exports=u},829:function(i,o,c){"use strict";var a=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(o,"__esModule",{value:!0});let u=a(c(374)).default("https-proxy-agent:parse-proxy-response");o.default=function(l){return new Promise((p,f)=>{let d=0,g=[];function E(){let O=l.read();O?function(v){g.push(v),d+=v.length;let _=Buffer.concat(g,d);if(_.indexOf(`\r
\r
`)===-1)return u("have not received end of HTTP headers yet..."),void E();let I=_.toString("ascii",0,_.indexOf(`\r
`)),q=+I.split(" ")[1];u("got proxy server response: %o",I),p({statusCode:q,buffered:_})}(O):l.once("readable",E)}function N(O){u("onclose had error %o",O)}function V(){u("onend")}l.on("error",function O(v){l.removeListener("end",V),l.removeListener("error",O),l.removeListener("close",N),l.removeListener("readable",E),u("onerror %o",v),f(v)}),l.on("close",N),l.on("end",V),E()})}},539:function(i,o,c){"use strict";var a,u=this&&this.__extends||(a=function(b,m){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var R in w)Object.prototype.hasOwnProperty.call(w,R)&&(y[R]=w[R])},a(b,m)},function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function y(){this.constructor=b}a(b,m),b.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}),l=this&&this.__assign||function(){return l=Object.assign||function(b){for(var m,y=1,w=arguments.length;y<w;y++)for(var R in m=arguments[y])Object.prototype.hasOwnProperty.call(m,R)&&(b[R]=m[R]);return b},l.apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.getErrorStatusDescription=o.xhr=o.configure=void 0;var p=c(685),f=c(687),d=c(310),g=c(472),E=c(796),N=c(201),V=c(18);if(process.env.VSCODE_NLS_CONFIG){var O=process.env.VSCODE_NLS_CONFIG;g.config(JSON.parse(O))}var v=g.loadMessageBundle(),_=void 0,I=!0;function q(b){var m;return new Promise(function(y,w){var R=(0,d.parse)(b.url),T={hostname:R.hostname,agent:!!b.agent&&b.agent,port:R.port?parseInt(R.port):R.protocol==="https:"?443:80,path:R.path,method:b.type||"GET",headers:b.headers,rejectUnauthorized:typeof b.strictSSL!="boolean"||b.strictSSL};b.user&&b.password&&(T.auth=b.user+":"+b.password);var P=function(M){if(M.statusCode>=300&&M.statusCode<400&&b.followRedirects&&b.followRedirects>0&&M.headers.location){var W=M.headers.location;W.startsWith("/")&&(W=(0,d.format)({protocol:R.protocol,hostname:R.hostname,port:R.port,pathname:W})),y(q(function(ee){for(var Y=[],$=1;$<arguments.length;$++)Y[$-1]=arguments[$];return Y.forEach(function(B){return Object.keys(B).forEach(function(j){return ee[j]=B[j]})}),ee}({},b,{url:W,followRedirects:b.followRedirects-1})))}else y({req:m,res:M})};(m=R.protocol==="https:"?f.request(T,P):p.request(T,P)).on("error",w),b.timeout&&m.setTimeout(b.timeout),b.data&&m.write(b.data),m.end(),b.token&&(b.token.isCancellationRequested&&m.destroy(new C),b.token.onCancellationRequested(function(){m.destroy(new C)}))})}o.configure=function(b,m){_=b,I=m},o.xhr=function(b){return typeof(b=l({},b)).strictSSL!="boolean"&&(b.strictSSL=I),b.agent||(b.agent=function(m,y){y===void 0&&(y={});var w=(0,d.parse)(m),R=y.proxyUrl||function(M){return M.protocol==="http:"?process.env.HTTP_PROXY||process.env.http_proxy||null:M.protocol==="https:"&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||null}(w);if(!R)return null;var T=(0,d.parse)(R);if(!/^https?:$/.test(T.protocol))return null;var P={host:T.hostname,port:Number(T.port),auth:T.auth,rejectUnauthorized:typeof y.strictSSL!="boolean"||y.strictSSL,protocol:T.protocol};return w.protocol==="http:"?N(P):V(P)}(b.url,{proxyUrl:_,strictSSL:I})),typeof b.followRedirects!="number"&&(b.followRedirects=5),q(b).then(function(m){return new Promise(function(y,w){var R,T,P=m.res,M=P,W=!1,ee=P.headers&&P.headers["content-encoding"];if(ee&&(R=b.type,T=m.res.statusCode,!(R==="HEAD"||T>=100&&T<200||T===204||T===304))){var Y={flush:E.constants.Z_SYNC_FLUSH,finishFlush:E.constants.Z_SYNC_FLUSH};if(ee==="gzip"){var $=E.createGunzip(Y);P.pipe($),M=$}else if(ee==="deflate"){var B=E.createInflate(Y);P.pipe(B),M=B}}var j=[];M.on("data",function(X){return j.push(X)}),M.on("end",function(){if(!W){if(W=!0,b.followRedirects>0&&(P.statusCode>=300&&P.statusCode<=303||P.statusCode===307)){var X=P.headers.location;if(X.startsWith("/")){var K=(0,d.parse)(b.url);X=(0,d.format)({protocol:K.protocol,hostname:K.hostname,port:K.port,pathname:X})}if(X){var Wr={type:b.type,url:X,user:b.user,password:b.password,headers:b.headers,timeout:b.timeout,followRedirects:b.followRedirects-1,data:b.data,token:b.token};return void(0,o.xhr)(Wr).then(y,w)}}var lt=Buffer.concat(j),Ve={responseText:lt.toString(),body:lt,status:P.statusCode,headers:P.headers||{}};P.statusCode>=200&&P.statusCode<300||P.statusCode===1223?y(Ve):w(Ve)}}),M.on("error",function(X){var K;K=C.is(X)?X:{responseText:v("error","Unable to access {0}. Error: {1}",b.url,X.message),body:Buffer.concat(j),status:500,headers:{}},W=!0,w(K)}),b.token&&(b.token.isCancellationRequested&&M.destroy(new C),b.token.onCancellationRequested(function(){M.destroy(new C)}))})},function(m){var y;return y=C.is(m)?m:{responseText:b.agent?v("error.cannot.connect.proxy","Unable to connect to {0} through a proxy. Error: {1}",b.url,m.message):v("error.cannot.connect","Unable to connect to {0}. Error: {1}",b.url,m.message),body:Buffer.concat([]),status:404,headers:{}},Promise.reject(y)})},o.getErrorStatusDescription=function(b){if(!(b<400))switch(b){case 400:return v("status.400","Bad request. The request cannot be fulfilled due to bad syntax.");case 401:return v("status.401","Unauthorized. The server is refusing to respond.");case 403:return v("status.403","Forbidden. The server is refusing to respond.");case 404:return v("status.404","Not Found. The requested location could not be found.");case 405:return v("status.405","Method not allowed. A request was made using a request method not supported by that location.");case 406:return v("status.406","Not Acceptable. The server can only generate a response that is not accepted by the client.");case 407:return v("status.407","Proxy Authentication Required. The client must first authenticate itself with the proxy.");case 408:return v("status.408","Request Timeout. The server timed out waiting for the request.");case 409:return v("status.409","Conflict. The request could not be completed because of a conflict in the request.");case 410:return v("status.410","Gone. The requested page is no longer available.");case 411:return v("status.411",'Length Required. The "Content-Length" is not defined.');case 412:return v("status.412","Precondition Failed. The precondition given in the request evaluated to false by the server.");case 413:return v("status.413","Request Entity Too Large. The server will not accept the request, because the request entity is too large.");case 414:return v("status.414","Request-URI Too Long. The server will not accept the request, because the URL is too long.");case 415:return v("status.415","Unsupported Media Type. The server will not accept the request, because the media type is not supported.");case 500:return v("status.500","Internal Server Error.");case 501:return v("status.501","Not Implemented. The server either does not recognize the request method, or it lacks the ability to fulfill the request.");case 502:return v("status.502","Bad Gateway. The upstream server did not respond.");case 503:return v("status.503","Service Unavailable. The server is currently unavailable (overloaded or down).");default:return v("status.416","HTTP status code {0}",b)}};var C=function(b){function m(){var y=b.call(this,"The user aborted a request")||this;return y.name="AbortError",Object.setPrototypeOf(y,m.prototype),y}return u(m,b),m.is=function(y){return y instanceof m},m}(Error)},800:(i,o,c)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.config=o.loadMessageBundle=o.localize=o.format=o.setPseudo=o.isPseudo=o.isDefined=o.BundleFormat=o.MessageFormat=void 0;var a,u,l,p=c(926);function f(g){return g!==void 0}function d(g,E){return o.isPseudo&&(g="\uFF3B"+g.replace(/[aouei]/g,"$&$&")+"\uFF3D"),E.length===0?g:g.replace(/\{(\d+)\}/g,function(N,V){var O=V[0],v=E[O],_=N;return typeof v=="string"?_=v:typeof v!="number"&&typeof v!="boolean"&&v!=null||(_=String(v)),_})}(l=o.MessageFormat||(o.MessageFormat={})).file="file",l.bundle="bundle",l.both="both",(u=o.BundleFormat||(o.BundleFormat={})).standalone="standalone",u.languagePack="languagePack",function(g){g.is=function(E){var N=E;return N&&f(N.key)&&f(N.comment)}}(a||(a={})),o.isDefined=f,o.isPseudo=!1,o.setPseudo=function(g){o.isPseudo=g},o.format=d,o.localize=function(g,E){for(var N=[],V=2;V<arguments.length;V++)N[V-2]=arguments[V];return d(E,N)},o.loadMessageBundle=function(g){return(0,p.default)().loadMessageBundle(g)},o.config=function(g){return(0,p.default)().config(g)}},926:(i,o)=>{"use strict";var c;function a(){if(c===void 0)throw new Error("No runtime abstraction layer installed");return c}Object.defineProperty(o,"__esModule",{value:!0}),function(u){u.install=function(l){if(l===void 0)throw new Error("No runtime abstraction layer provided");c=l}}(a||(a={})),o.default=a},472:(i,o,c)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.config=o.loadMessageBundle=o.BundleFormat=o.MessageFormat=void 0;var a=c(17),u=c(147),l=c(926),p=c(800),f=c(800);Object.defineProperty(o,"MessageFormat",{enumerable:!0,get:function(){return f.MessageFormat}}),Object.defineProperty(o,"BundleFormat",{enumerable:!0,get:function(){return f.BundleFormat}});var d,g,E=Object.prototype.toString;function N(m){return E.call(m)==="[object Number]"}function V(m){return E.call(m)==="[object String]"}function O(m){return JSON.parse(u.readFileSync(m,"utf8"))}function v(m){return function(y,w){for(var R=[],T=2;T<arguments.length;T++)R[T-2]=arguments[T];return N(y)?y>=m.length?void console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `.concat(new Error("").stack)):(0,p.format)(m[y],R):V(w)?(console.warn("Message ".concat(w," didn't get externalized correctly.")),(0,p.format)(w,R)):void console.error(`Broken localize call found. Stacktrace is
: `.concat(new Error("").stack))}}function _(m,y){return d[m]=y,y}function I(m){try{return function(y){var w=O(a.join(y,"nls.metadata.json")),R=Object.create(null);for(var T in w){var P=w[T];R[T]=P.messages}return R}(m)}catch(y){return void console.log("Generating default bundle from meta data failed.",y)}}function q(m,y){var w;if(g.languagePackSupport===!0&&g.cacheRoot!==void 0&&g.languagePackId!==void 0&&g.translationsConfigFile!==void 0&&g.translationsConfig!==void 0)try{w=function(T,P){var M,W,ee,Y=a.join(g.cacheRoot,"".concat(T.id,"-").concat(T.hash,".json")),$=!1,B=!1;try{return M=JSON.parse(u.readFileSync(Y,{encoding:"utf8",flag:"r"})),W=Y,ee=new Date,u.utimes(W,ee,ee,function(){}),M}catch(j){if(j.code==="ENOENT")B=!0;else{if(!(j instanceof SyntaxError))throw j;console.log("Syntax error parsing message bundle: ".concat(j.message,".")),u.unlink(Y,function(X){X&&console.error("Deleting corrupted bundle ".concat(Y," failed."))}),$=!0}}if(M=function(j,X){var K=g.translationsConfig[j.id];if(K){var Wr=O(K).contents,lt=O(a.join(X,"nls.metadata.json")),Ve=Object.create(null);for(var Ft in lt){var qt=lt[Ft],Nn=Wr["".concat(j.outDir,"/").concat(Ft)];if(Nn){for(var Dn=[],Mt=0;Mt<qt.keys.length;Mt++){var Kr=qt.keys[Mt],Qr=Nn[V(Kr)?Kr:Kr.key];Qr===void 0&&(Qr=qt.messages[Mt]),Dn.push(Qr)}Ve[Ft]=Dn}else Ve[Ft]=qt.messages}return Ve}}(T,P),!M||$)return M;if(B)try{u.writeFileSync(Y,JSON.stringify(M),{encoding:"utf8",flag:"wx"})}catch(j){if(j.code==="EEXIST")return M;throw j}return M}(m,y)}catch(T){console.log("Load or create bundle failed ",T)}if(!w){if(g.languagePackSupport)return I(y);var R=function(T){for(var P=g.language;P;){var M=a.join(T,"nls.bundle.".concat(P,".json"));if(u.existsSync(M))return M;var W=P.lastIndexOf("-");P=W>0?P.substring(0,W):void 0}if(P===void 0&&(M=a.join(T,"nls.bundle.json"),u.existsSync(M)))return M}(y);if(R)try{return O(R)}catch(T){console.log("Loading in the box message bundle failed.",T)}w=I(y)}return w}function C(m){if(!m)return p.localize;var y=a.extname(m);if(y&&(m=m.substr(0,m.length-y.length)),g.messageFormat===p.MessageFormat.both||g.messageFormat===p.MessageFormat.bundle){var w=function($){for(var B,j=a.dirname($);B=a.join(j,"nls.metadata.header.json"),!u.existsSync(B);){var X=a.dirname(j);if(X===j){B=void 0;break}j=X}return B}(m);if(w){var R=a.dirname(w),T=d[R];if(T===void 0)try{var P=JSON.parse(u.readFileSync(w,"utf8"));try{var M=q(P,R);T=_(R,M?{header:P,nlsBundle:M}:null)}catch($){console.error("Failed to load nls bundle",$),T=_(R,null)}}catch($){console.error("Failed to read header file",$),T=_(R,null)}if(T){var W=m.substr(R.length+1).replace(/\\/g,"/"),ee=T.nlsBundle[W];return ee===void 0?(console.error("Messages for file ".concat(m," not found. See console for details.")),function(){return"Messages not found."}):v(ee)}}}if(g.messageFormat===p.MessageFormat.both||g.messageFormat===p.MessageFormat.file)try{var Y=O(function($){var B;if(!(g.cacheLanguageResolution&&B)){if(p.isPseudo||!g.language)B=".nls.json";else for(var j=g.language;j;){var X=".nls."+j+".json";if(u.existsSync($+X)){B=X;break}var K=j.lastIndexOf("-");K>0?j=j.substring(0,K):(B=".nls.json",j=null)}g.cacheLanguageResolution}return $+B}(m));return Array.isArray(Y)?v(Y):(0,p.isDefined)(Y.messages)&&(0,p.isDefined)(Y.keys)?v(Y.messages):(console.error("String bundle '".concat(m,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch($){$.code!=="ENOENT"&&console.error("Failed to load single file bundle",$)}return console.error("Failed to load message bundle for file ".concat(m)),function(){return"Failed to load message bundle. See console for details."}}function b(m){return m&&(V(m.locale)&&(g.locale=m.locale.toLowerCase(),g.language=g.locale,d=Object.create(null)),m.messageFormat!==void 0&&(g.messageFormat=m.messageFormat),m.bundleFormat===p.BundleFormat.standalone&&g.languagePackSupport===!0&&(g.languagePackSupport=!1)),(0,p.setPseudo)(g.locale==="pseudo"),C}(function(){if(g={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:p.MessageFormat.bundle},V(process.env.VSCODE_NLS_CONFIG))try{var m=JSON.parse(process.env.VSCODE_NLS_CONFIG),y=void 0;if(m.availableLanguages){var w=m.availableLanguages["*"];V(w)&&(y=w)}if(V(m.locale)&&(g.locale=m.locale.toLowerCase()),y===void 0?g.language=g.locale:y!=="en"&&(g.language=y),function(T){return T===!0||T===!1}(m._languagePackSupport)&&(g.languagePackSupport=m._languagePackSupport),V(m._cacheRoot)&&(g.cacheRoot=m._cacheRoot),V(m._languagePackId)&&(g.languagePackId=m._languagePackId),V(m._translationsConfigFile)){g.translationsConfigFile=m._translationsConfigFile;try{g.translationsConfig=O(g.translationsConfigFile)}catch{if(m._corruptedFile){var R=a.dirname(m._corruptedFile);u.exists(R,function(P){P&&u.writeFile(m._corruptedFile,"corrupted","utf8",function(M){console.error(M)})})}}}}catch{}(0,p.setPseudo)(g.locale==="pseudo"),d=Object.create(null)})(),o.loadMessageBundle=C,o.config=b,l.default.install(Object.freeze({loadMessageBundle:C,config:b}))},374:(i,o)=>{function c(){}Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(a){return c}},491:i=>{"use strict";i.exports=require("assert")},361:i=>{"use strict";i.exports=require("events")},147:i=>{"use strict";i.exports=require("fs")},685:i=>{"use strict";i.exports=require("http")},687:i=>{"use strict";i.exports=require("https")},808:i=>{"use strict";i.exports=require("net")},17:i=>{"use strict";i.exports=require("path")},404:i=>{"use strict";i.exports=require("tls")},310:i=>{"use strict";i.exports=require("url")},796:i=>{"use strict";i.exports=require("zlib")}},e={},t=function i(o){var c=e[o];if(c!==void 0)return c.exports;var a=e[o]={exports:{}};return s[o].call(a.exports,a,a.exports,i),a.exports}(539),r=lc;for(var n in t)r[n]=t[n];t.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})()});var hc=h(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.RequestService=tt.RestHttpMethodEnum=void 0;var fc=pc(),Ne=Je(),wn;(function(s){s.Delete="DELETE",s.Get="GET",s.Post="POST"})(wn||(tt.RestHttpMethodEnum=wn={}));var Pn=class{constructor(){this._proxyStrictSSL=!1,this._connectionTimeoutMs=Ne.DEFAULT_CONNECTION_TIMEOUT_MS}getEnvVars(){let e=Object.assign({},process.env),t=this.proxyUrl;t&&(e[Ne.ENV_HTTP_PROXY]=t,e[Ne.ENV_HTTPS_PROXY]=t);let r=this.instanceUrl;r&&(e[Ne.ENV_SF_ORG_INSTANCE_URL]=r);let n=this.accessToken;return n&&(e[Ne.ENV_SF_TARGET_ORG]=n),e}get instanceUrl(){return this._instanceUrl}set instanceUrl(e){this._instanceUrl=e}get accessToken(){return this._accessToken}set accessToken(e){this._accessToken=e}get proxyUrl(){return this._proxyUrl}set proxyUrl(e){this._proxyUrl=e}get proxyStrictSSL(){return this._proxyStrictSSL}set proxyStrictSSL(e){this._proxyStrictSSL=e}get proxyAuthorization(){return this._proxyAuthorization}set proxyAuthorization(e){this._proxyAuthorization=e}get connectionTimeoutMs(){return this._connectionTimeoutMs||Ne.DEFAULT_CONNECTION_TIMEOUT_MS}set connectionTimeoutMs(e){this._connectionTimeoutMs=e}async execute(e,t=wn.Post){this.proxyUrl&&(0,fc.configure)(this._proxyUrl,this._proxyStrictSSL);let r=[this.instanceUrl,e.getCommandUrl()],n=e.getQueryString(),i=n?r.join("/").concat("?",n):r.join("/"),o=e.getRequest(),c={type:t,url:i,timeout:this.connectionTimeoutMs,headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/json",Authorization:`OAuth ${this.accessToken}`,"Content-Length":o?String(Buffer.byteLength(o,"utf-8")):"0","Sforce-Call-Options":`client=${Ne.CLIENT_ID}`},data:o};this.proxyAuthorization&&c.headers&&(c.headers["Proxy-Authorization"]=this.proxyAuthorization);try{let a=await this.sendRequest(c);return Promise.resolve(a.responseText)}catch(a){let u=a;return Promise.reject(u.responseText)}}async sendRequest(e){return(0,fc.xhr)(e)}};tt.RequestService=Pn});var gc=h(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.RestHttpMethodEnum=Le.RequestService=Le.BaseCommand=void 0;var fg=cc();Object.defineProperty(Le,"BaseCommand",{enumerable:!0,get:function(){return fg.BaseCommand}});var dc=hc();Object.defineProperty(Le,"RequestService",{enumerable:!0,get:function(){return dc.RequestService}});Object.defineProperty(Le,"RestHttpMethodEnum",{enumerable:!0,get:function(){return dc.RestHttpMethodEnum}})});var bc=h(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0})});var Ec=h(De=>{"use strict";var hg=De&&De.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(s,r,n)}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),dg=De&&De.__exportStar||function(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&hg(e,s,t)};Object.defineProperty(De,"__esModule",{value:!0});dg(bc(),De)});var Ot=h(ce=>{"use strict";var gg=ce&&ce.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(s,r,n)}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),Fe=ce&&ce.__exportStar||function(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&gg(e,s,t)};Object.defineProperty(ce,"__esModule",{value:!0});Fe(Ot(),ce);Fe(ic(),ce);Fe(Je(),ce);Fe(an(),ce);Fe(uc(),ce);Fe(gc(),ce);Fe(Ec(),ce)});var Sc=h((Rc,Hr)=>{(function(s){if(typeof Hr=="object"&&typeof Hr.exports=="object"){var e=s(require,Rc);e!==void 0&&(Hr.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],s)})(function(s,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function t(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()}function r(a){return encodeURIComponent(a).replace(/[!'()*]/g,t)}function n(a){return a.replace(/[#?]/,t)}var i=function(){function a(){this._scheme=a._empty,this._authority=a._empty,this._path=a._empty,this._query=a._empty,this._fragment=a._empty,this._formatted=null,this._fsPath=null}return a.isUri=function(u){return u instanceof a?!0:u?typeof u.authority=="string"&&typeof u.fragment=="string"&&typeof u.path=="string"&&typeof u.query=="string"&&typeof u.scheme=="string":!1},Object.defineProperty(a.prototype,"scheme",{get:function(){return this._scheme},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"authority",{get:function(){return this._authority},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"query",{get:function(){return this._query},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fragment",{get:function(){return this._fragment},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fsPath",{get:function(){if(!this._fsPath){var u;this._authority&&this._path&&this.scheme==="file"?u="//"+this._authority+this._path:a._driveLetterPath.test(this._path)?u=this._path[1].toLowerCase()+this._path.substr(2):u=this._path,o&&(u=u.replace(/\//g,"\\")),this._fsPath=u}return this._fsPath},enumerable:!0,configurable:!0}),a.prototype.with=function(u){if(!u)return this;var l=u.scheme,p=u.authority,f=u.path,d=u.query,g=u.fragment;if(l===void 0?l=this.scheme:l===null&&(l=""),p===void 0?p=this.authority:p===null&&(p=""),f===void 0?f=this.path:f===null&&(f=""),d===void 0?d=this.query:d===null&&(d=""),g===void 0?g=this.fragment:g===null&&(g=""),l===this.scheme&&p===this.authority&&f===this.path&&d===this.query&&g===this.fragment)return this;var E=new a;return E._scheme=l,E._authority=p,E._path=f,E._query=d,E._fragment=g,a._validate(E),E},a.parse=function(u){var l=new a,p=a._parseComponents(u);return l._scheme=p.scheme,l._authority=decodeURIComponent(p.authority),l._path=decodeURIComponent(p.path),l._query=decodeURIComponent(p.query),l._fragment=decodeURIComponent(p.fragment),a._validate(l),l},a.file=function(u){var l=new a;if(l._scheme="file",o&&(u=u.replace(/\\/g,a._slash)),u[0]===a._slash&&u[0]===u[1]){var p=u.indexOf(a._slash,2);p===-1?l._authority=u.substring(2):(l._authority=u.substring(2,p),l._path=u.substring(p))}else l._path=u;return l._path[0]!==a._slash&&(l._path=a._slash+l._path),a._validate(l),l},a._parseComponents=function(u){var l={scheme:a._empty,authority:a._empty,path:a._empty,query:a._empty,fragment:a._empty},p=a._regexp.exec(u);return p&&(l.scheme=p[2]||l.scheme,l.authority=p[4]||l.authority,l.path=p[5]||l.path,l.query=p[7]||l.query,l.fragment=p[9]||l.fragment),l},a.from=function(u){return new a().with(u)},a._validate=function(u){if(u.scheme&&!a._schemePattern.test(u.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(u.path){if(u.authority){if(!a._singleSlashStart.test(u.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a._doubleSlashStart.test(u.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}},a.prototype.toString=function(u){return u===void 0&&(u=!1),u?a._asFormatted(this,!0):(this._formatted||(this._formatted=a._asFormatted(this,!1)),this._formatted)},a._asFormatted=function(u,l){var p=l?n:r,f=[],d=u.scheme,g=u.authority,E=u.path,N=u.query,V=u.fragment;if(d&&f.push(d,":"),(g||d==="file")&&f.push("//"),g){g=g.toLowerCase();var O=g.indexOf(":");O===-1?f.push(p(g)):f.push(p(g.substr(0,O)),g.substr(O))}if(E){var v=a._upperCaseDrive.exec(E);v&&(v[1]?E="/"+v[2].toLowerCase()+E.substr(3):E=v[2].toLowerCase()+E.substr(2));for(var _=0;;){var O=E.indexOf(a._slash,_);if(O===-1){f.push(p(E.substring(_)));break}f.push(p(E.substring(_,O)),a._slash),_=O+1}}return N&&f.push("?",p(N)),V&&f.push("#",p(V)),f.join(a._empty)},a.prototype.toJSON=function(){var u={fsPath:this.fsPath,external:this.toString(),$mid:1};return this.path&&(u.path=this.path),this.scheme&&(u.scheme=this.scheme),this.authority&&(u.authority=this.authority),this.query&&(u.query=this.query),this.fragment&&(u.fragment=this.fragment),u},a.revive=function(u){var l=new a;return l._scheme=u.scheme||a._empty,l._authority=u.authority||a._empty,l._path=u.path||a._empty,l._query=u.query||a._empty,l._fragment=u.fragment||a._empty,l._fsPath=u.fsPath,l._formatted=u.external,a._validate(l),l},a}();i._empty="",i._slash="/",i._regexp=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,i._driveLetterPath=/^\/[a-zA-z]:/,i._upperCaseDrive=/^(\/)?([A-Z]:)/,i._schemePattern=/^\w[\w\d+.-]*$/,i._singleSlashStart=/^\//,i._doubleSlashStart=/^\/\//,e.default=i;var o;if(typeof process=="object")o=process.platform==="win32";else if(typeof navigator=="object"){var c=navigator.userAgent;o=c.indexOf("Windows")>=0}})});var vg={};$c(vg,{ApexDebugStackFrameInfo:()=>qe,ApexReplayDebug:()=>Pt,ApexVariable:()=>Nt,ApexVariableContainer:()=>H,SCOPE_TYPES:()=>Nc,ScopeContainer:()=>ct,Step:()=>Pc,VariableContainer:()=>Dt});module.exports=kc(vg);var wc=require("os"),D=ge(ht());var de=class{constructor(){this.lineNumberMapping=new Map;this.typerefMapping=new Map}setValidLines(e,t){this.lineNumberMapping=e,this.typerefMapping=t}static getInstance(){return de.instance||(de.instance=new de),de.instance}static setInstance(e){de.instance=e}hasLineNumberMapping(){return this.lineNumberMapping&&this.lineNumberMapping.size>0}getLineNumberMapping(){return this.lineNumberMapping}getTyperefMapping(){return this.typerefMapping}canSetLineBreakpoint(e,t){return this.lineNumberMapping.has(e)&&this.lineNumberMapping.get(e).indexOf(t)!==-1}createMappingsFromLineBreakpointInfo(e){this.lineNumberMapping.clear(),this.typerefMapping.clear();for(let t of e)this.lineNumberMapping.has(t.uri)||this.lineNumberMapping.set(t.uri,[]),this.lineNumberMapping.set(t.uri,this.lineNumberMapping.get(t.uri).concat(t.lines)),this.typerefMapping.set(t.typeref,t.uri)}returnLinesForLoggingFromBreakpointArgs(e){return e.map(t=>t.line).join(",")}getTopLevelTyperefForUri(e){let t="";return this.typerefMapping.forEach((r,n)=>{if(r===e&&n.indexOf("$")===-1){t=n;return}}),t}};var ke=de.getInstance();var Jn="0x";var Jt="CODE_UNIT_STARTED",Wt="CODE_UNIT_FINISHED",Kt="CONSTRUCTOR_ENTRY",Qt="CONSTRUCTOR_EXIT",Wn="Execute Anonymous",Kn="HEAP_DUMP",Qn="METHOD_ENTRY",Zn="METHOD_EXIT",ei="STATEMENT_EXECUTE",ti="USER_DEBUG",Zt="VF_APEX_CALL_START",er="VF_APEX_CALL_END",ri="VARIABLE_SCOPE_BEGIN",si="VARIABLE_ASSIGNMENT",je="execute_anonymous_apex";var Ue="sendMetricGeneral",me="sendMetricError",ni="sendMetricLaunch";var ii="services/data/v43.0/tooling/sobjects";var dt="__sfdc_trigger/",Is="Trigger.",oi="blob",ws="boolean",ai="date",ui="datetime",ci="decimal",li="double",pi="id",fi="integer",hi="long",be="string",di="time",Ps="String",Ns="KeyValuePair",He="key",Be="value";var tr=class{constructor(e){this.logContext=e}replaceVariablesWithHeapDump(){let e=this.logContext.getTopFrame();e&&this.replaceFrameVariablesWithHeapDump(e)}replaceFrameVariablesWithHeapDump(e){let t=this.logContext.getHeapDumpForThisLocation(e.name,e.line);if(t&&t.getOverlaySuccessResult()){let r=t.getOverlaySuccessResult(),n=this.logContext.getFrameHandler().get(e.id);this.logContext.getRefsMap().clear(),this.logContext.getVariableHandler().reset(),this.createStringRefsFromHeapdump(r);for(let i of r.HeapDump.extents)if(!this.isPrimitiveType(i.typeName))for(let o of i.extent){let c=o.address,a=new H("","",i.typeName,c);this.updateLeafReferenceContainer(a,o,i.collectionType),this.logContext.getRefsMap().set(c,a)}for(let i of r.HeapDump.extents)for(let o of i.extent){let c=o.symbols&&o.symbols.length>0?o.symbols[0]:void 0,a=c?this.logContext.getUtil().substringUpToLastPeriod(c):void 0;if(c&&n.locals.has(c)){let u=n.locals.get(c);u.type=i.typeName;let l=this.logContext.getRefsMap().get(o.address);if(l)if(l.type===be)u.value=l.value;else{let p=this.createVariableFromReference(c,l,new Map,new Array);p&&n.locals.set(u.name,p)}else u.value=this.createStringFromExtentValue(o.value.value)}else if(c&&a&&this.logContext.getStaticVariablesClassMap().has(a)){let u=this.logContext.getStaticVariablesClassMap().get(a),l=this.logContext.getUtil().substringFromLastPeriod(c);if(u&&u.has(l)){let p=u.get(l);p.type=i.typeName;let f=this.logContext.getRefsMap().get(o.address);if(f)if(f.type===be)p.value=f.value;else{let d=this.createVariableFromReference(c,f,new Map,new Array);d&&u.set(p.name,d)}else p.value=this.createStringFromExtentValue(o.value.value)}}}if(this.logContext.isRunningApexTrigger()){for(let i of r.HeapDump.extents)if(this.isTriggerExtent(i)){for(let o of i.extent)if(o.symbols&&o.symbols.length>0){for(let c of o.symbols)if(c&&c.startsWith(Is)){let a=this.logContext.getRefsMap().get(o.address);if(a){let u=this.createVariableFromReference(c,a,new Map,new Array);u&&n.globals.set(c,u)}else n.globals.set(c,new H(c,this.createStringFromExtentValue(o.value.value),i.typeName))}}}}}}createStringRefsFromHeapdump(e){let t=this.logContext.getRefsMap();for(let r of e.HeapDump.extents)if(r.typeName.toLowerCase()===be)for(let n of r.extent){t.has(n.address)||t.set(n.address,new H("",n.value.value,Ps,n.address));let i=t.get(n.address);i.type=Ps,i.value=`'${n.value.value}'`}}isAddress(e){return typeof e=="string"&&e.startsWith(Jn)}isTriggerExtent(e){return!!((e.typeName.toLowerCase()===ws||this.isCollectionType(e.typeName))&&e.count>0&&e.extent[0].symbols!==null&&e.extent[0].symbols.length>0&&e.extent[0].symbols[0].startsWith(Is))}copyReferenceContainer(e,t,r=!0){let n=new H(t,e.value,e.type,e.ref);return n.variables=e.variables,this.isPrimitiveType(n.type)||(r?n.variablesRef=this.logContext.getVariableHandler().create(n):n.variablesRef=e.variablesRef),n}createStringFromVarContainer(e,t){if(!e.ref||e.type.toLowerCase()===be)return e.value;if(e.ref){if(t.has(e.ref))return"already output";t.add(e.ref)}let r="";try{let n=e.type.toLowerCase().startsWith("list<")||e.type.toLowerCase().startsWith("set<"),i=this.isCollectionType(e.type)?"":`${e.type}:`;r=n?"(":`${i}{`;let o=!0;for(let c of Array.from(e.variables.entries())){let a=c[1];o||(r+=", "),a.ref?r+=this.createStringFromVarContainer(a,t):r+=n?a.value:`${a.name}=${a.value}`,o=!1}r+=n?")":"}"}finally{e.ref&&t.delete(e.ref)}return r}isPrimitiveType(e){let t=e.toLocaleLowerCase();return t===oi||t===ws||t===ai||t===ui||t===ci||t===li||t===pi||t===fi||t===hi||t===be||t===di}isCollectionType(e){return e.toLocaleLowerCase().startsWith("map<")||e.toLocaleLowerCase().startsWith("list<")||e.toLocaleLowerCase().startsWith("set<")}updateLeafReferenceContainer(e,t,r){let n="";r&&(n=r);let i=!1;if(this.isCollectionType(e.type))if(t.value.entry){let o=0,c=this.getKeyTypeForMap(e.type,r||"");for(let a of t.value.entry){let u=this.isAddress(a.keyDisplayValue),l=this.isAddress(a.value.value),p=`${He}${o.toString()}_${Be}${o.toString()}`,f=new H(p,"",Ns),d=new H(He,"",c);if(u){let E=this.logContext.getRefsMap().get(a.keyDisplayValue);E&&E.type.toLowerCase()===be?(u=!1,d.value=E.value):(i=!0,d.ref=a.keyDisplayValue)}else d.value=a.keyDisplayValue.toString();let g=new H(Be,"",n);if(l){let E=this.logContext.getRefsMap().get(a.value.value);E&&E.type.toLowerCase()===be?(l=!1,g.value=E.value):(i=!0,g.ref=a.value.value)}else g.value=this.createStringFromExtentValue(a.value.value);f.variables.set(d.name,d),f.variables.set(g.name,g),!u&&!l&&(f.name=d.value,f.value=g.value),e.variables.set(p,f),o++}}else{let o=t.value.value;for(let c=0;c<o.length;c++)if(this.isAddress(o[c].value)){let a=o[c].value,u=this.logContext.getRefsMap().get(o[c].value);u&&u.type.toLowerCase()===be?a=u.value:i=!0,e.variables.set(c.toString(),new H(c.toString(),a,n,o[c].value))}else e.variables.set(c.toString(),new H(c.toString(),this.createStringFromExtentValue(o[c].value),n))}else for(let o of t.value.entry)if(this.isAddress(o.value.value)){let a=o.value.value,u=this.logContext.getRefsMap().get(o.value.value);u&&u.type.toLowerCase()===be?a=u.value:i=!0,e.variables.set(o.keyDisplayValue,new H(o.keyDisplayValue,a,"",o.value.value))}else e.variables.set(o.keyDisplayValue,new H(o.keyDisplayValue,this.createStringFromExtentValue(o.value.value),""));i||(e.value=this.createStringFromVarContainer(e,new Set))}createStringFromExtentValue(e){return e===void 0?"undefined":e===null?"null":e.toString()}createVariableFromReference(e,t,r,n){if(!!t.ref){if(r.has(t.ref)){let i=r.get(t.ref);if(i!==null)if(i.name!==e){let o=this.copyReferenceContainer(i,e,!1);return n.push(o),o}else return i;return}try{let i=this.copyReferenceContainer(t,e);r.set(t.ref,i);for(let o of Array.from(i.variables.entries())){let c=o[0],a=o[1];if(a.type===Ns){let u=a.variables.get(He),l=u.value;if(u&&u.ref){let d=this.logContext.getRefsMap().get(u.ref);if(d){let g=this.createVariableFromReference(He,d,r,n);g&&(l=g.value,a.variables.set(He,g))}else u.value=u.ref,u.ref=void 0}let p=a.variables.get(Be),f=p.value;if(p&&p.ref){let d=this.logContext.getRefsMap().get(p.ref);if(d){let g=this.createVariableFromReference(Be,d,r,n);g&&(f=g.value,a.variables.set(Be,g))}else p.value=p.ref,p.ref=void 0}a.name=l,a.value=f,a.variablesRef=this.logContext.getVariableHandler().create(a)}else{if(!a.ref)continue;let u=this.logContext.getRefsMap().get(a.ref);if(u){let l=this.createVariableFromReference(c,u,r,n);l&&i.variables.set(c,l)}else a.value=a.ref,a.ref=void 0}i.value=this.createStringFromVarContainer(i,new Set)}return i}finally{r.delete(t.ref),r.size===0&&n.forEach(i=>{let o=i;o.value=this.createStringFromVarContainer(o,new Set)})}}}getKeyTypeForMap(e,t){let r=","+t;return e.substring(e.indexOf("<")+1,e.lastIndexOf(r))}};var ut=ge(Ot()),Cc=ge(require("path"));var _c=ge(Ot());var Ct=class extends _c.BaseCommand{constructor(t){super(void 0);this.commandName="ApexExecutionOverlayResult";this.heapdumpKey=t}getCommandUrl(){return[ii,this.commandName,this.heapdumpKey].join("/")}getRequest(){}};var ne=ge(Ot());var vc={session_language_server_error_text:"Apex language server could not provide information about valid breakpoints.",session_started_text:"Apex Replay Debugger session started for log file %s.",session_terminated_text:"Apex Replay Debugger session terminated.",no_log_file_text:"The log file either is missing or does not have any log lines in it.",incorrect_log_levels_text:"The log must be generated with log categories Apex code at the FINEST level and Visualforce at the FINER level.",unable_to_retrieve_org_info:"Unable to retrieve OrgInfo",heap_dump_error:"Problems were encountered while retrieving heap dump information. Message=%s, Error code=%s, Heap dump information=%s",heap_dump_error_wrap_up_text:"Problems were encountered while retrieving heap dump information. See the messages above this one for details. Detailed heap dump variable information is unavailable for the specified line or lines.",fetching_heap_dump:"Retrieving heap dump from server. Heap dump information=%s",malformed_log_line:"Encountered a malformed HEAP_DUMP log line, skipping. Log line number=%d, log line='%s'.",reconcile_heapdump_error:'Problems were encountered while using a heap dump: %s. Use Tooling API to delete the ApexExecutionOverlayResult record with the ID %s: From a terminal, run "sf data:delete:record -t -s ApexExecutionOverlayResult -i %s".'};var yc={session_language_server_error_text:"Apex \u8A00\u8A9E\u30B5\u30FC\u30D0\u306F\u6709\u52B9\u306A\u30D6\u30EC\u30FC\u30AF\u30DD\u30A4\u30F3\u30C8\u306B\u95A2\u3059\u308B\u60C5\u5831\u3092\u63D0\u4F9B\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",session_started_text:"Apex Replay Debugger \u30BB\u30C3\u30B7\u30E7\u30F3\u3092\u30ED\u30B0\u30D5\u30A1\u30A4\u30EB %s \u3067\u958B\u59CB\u3057\u307E\u3057\u305F\u3002",session_terminated_text:"Apex Replay Debugger \u30BB\u30C3\u30B7\u30E7\u30F3\u3092\u7D42\u4E86\u3057\u307E\u3057\u305F\u3002",no_log_file_text:"\u30ED\u30B0\u30D5\u30A1\u30A4\u30EB\u304C\u898B\u3064\u304B\u3089\u306A\u3044\u304B\u3001\u30D5\u30A1\u30A4\u30EB\u306B\u30ED\u30B0\u306E\u884C\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u305B\u3093\u3002",incorrect_log_levels_text:"\u30ED\u30B0\u306F\u3001\u30ED\u30B0\u30AB\u30C6\u30B4\u30EA\u3092 Apex \u304C FINEST \u30EC\u30D9\u30EB\u306B\u3001Visualforce \u304C FINER \u30EC\u30D9\u30EB\u3067\u751F\u6210\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002",unable_to_retrieve_org_info:"OrgInfo \u306E\u53D6\u5F97\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",heap_dump_error:"\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3059\u308B\u969B\u306B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u30E1\u30C3\u30BB\u30FC\u30B8=%s, \u30A8\u30E9\u30FC\u30B3\u30FC\u30C9=%s, \u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831=%s",heap_dump_error_wrap_up_text:"\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3059\u308B\u969B\u306B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u8A73\u7D30\u306B\u3064\u3044\u3066\u306F\u3001\u4E0A\u8A18\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u6307\u5B9A\u3055\u308C\u305F\u884C\u306B\u3064\u3044\u3066\u3001\u8A73\u7D30\u306A\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u5909\u6570\u306E\u60C5\u5831\u304C\u4F7F\u7528\u3067\u304D\u307E\u305B\u3093\u3002",fetching_heap_dump:"\u30B5\u30FC\u30D0\u304B\u3089\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3057\u3066\u3044\u307E\u3059\u3002\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831=%s",malformed_log_line:"\u4E0D\u6B63\u306A HEAP_DUMP \u306E\u30ED\u30B0\u306E\u884C\u304C\u898B\u3064\u304B\u308A\u307E\u3057\u305F\u3002\u3053\u306E\u884C\u3092\u30B9\u30AD\u30C3\u30D7\u3057\u307E\u3059\u3002\u30ED\u30B0\u306E\u884C\u756A\u53F7=%d\u3001\u30ED\u30B0\u306E\u884C='%s'",reconcile_heapdump_error:'\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3059\u308B\u969B\u306B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F: %s\u3002 Tooling API \u3092\u4F7F\u7528\u3057\u3066 ApexExecutionOverlayResult \u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u306E\u30EC\u30B3\u30FC\u30C9 (ID %s) \u3092\u524A\u9664\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u30BF\u30FC\u30DF\u30CA\u30EB\u304B\u3089\u3001"sf data:delete:record -t -s ApexExecutionOverlayResult -i %s" \u3092\u5B9F\u884C\u3057\u3066\u304F\u3060\u3055\u3044\u3002'};function mg(s){function e(r){return r===ne.DEFAULT_LOCALE?`${ne.BASE_FILE_NAME}.${ne.BASE_FILE_EXTENSION}`:`${ne.BASE_FILE_NAME}.${r}.${ne.BASE_FILE_EXTENSION}`}let t=new ne.Message(vc);if(s&&s.locale&&s.locale!==ne.DEFAULT_LOCALE){if(s.locale==="ja")return new ne.Message(yc,t);console.error(`Cannot find ${s.locale}, defaulting to en`)}return t}var ie=new ne.Localization(mg(process.env.VSCODE_NLS_CONFIG?JSON.parse(process.env.VSCODE_NLS_CONFIG):void 0));var xc=require("path"),Br=ge(ht()),Lc=ge(Sc());var Te=class{static computeFrameName(e){let t=e[e.length-1],r=" invoke\\((.*)\\)",n="";switch(e[1]){case Jt:case Wt:t.startsWith(dt)?n=t.substring(dt.length):n=t;break;case Kt:case Qt:t.lastIndexOf(".")>=0?n=t+"."+t.substr(t.lastIndexOf(".")+1):t.lastIndexOf("/")>=0?n=t+"."+t.substring(t.lastIndexOf("/")+1):n=t+"."+t;break;case Zt:case er:n=t;let i=e[e.length-2].match(r);i!=null&&i.length>=2&&(n+="."+i[1],i[1].endsWith(")")||(n+="()"));break;default:n=t}return n}static isExtraneousVFGetterOrSetterLogLine(e){let t=" get\\((.*)\\)",r=" set\\((.*)\\)";return!(e.match(t)==null&&e.match(r)==null)}};var rt=class{constructor(e){this._signature=e[e.length-1],this._frameName=Te.computeFrameName(e)}};var st=class extends rt{constructor(e){super(e)}handle(e){let t=e.getUriFromSignature(this._signature),r=new qe(e.getFrames().length,this._signature),n=e.getFrameHandler().create(r),i=this._signature.indexOf(".")>-1?this._signature.substring(0,this._signature.lastIndexOf(".")):this._signature;return e.getStaticVariablesClassMap().has(i)?r.statics=e.getStaticVariablesClassMap().get(i):e.getStaticVariablesClassMap().set(i,r.statics),e.getFrames().push(new Br.StackFrame(n,this._frameName,t?new Br.Source((0,xc.basename)(t),Lc.default.parse(t).fsPath):void 0,void 0)),!1}};var nt=class extends rt{constructor(e){super(e)}handle(e){for(;e.hasFrames();){let t=e.getTopFrame();if(t&&(e.getFrames().pop(),t.name===this._frameName||t.name.startsWith(this._frameName)))break}return!1}};var Gr=ge(ht()),it=class{handle(e){let t=e.getLogFileName();return e.getFrames().push(new Gr.StackFrame(0,"",new Gr.Source(t,e.getLogFilePath()),e.getLogLinePosition()+1)),!0}};var Oe=class{handle(e){return!1}};var At=class{constructor(e){this.line=parseInt(e[e.length-1],10)}handle(e){let t=e.getTopFrame();return t&&(t.line=t.name===je?e.getExecAnonScriptLocationInDebugLog(this.line):this.line),!0}};var Tc=require("os");var Oc=ge(ht()),ot=class{constructor(e){this.line=parseInt(e[2],10),this.message=e[e.length-1]}getMessage(){return this.message}handle(e){this.lookAheadAndAppend(e);let t=e.getTopFrame();return t&&e.getSession().warnToDebugConsole(this.message,t.source instanceof Oc.Source?t.source:void 0,t.name===je?e.getExecAnonScriptLocationInDebugLog(this.line):this.line),!1}lookAheadAndAppend(e){for(let t=e.getLogLinePosition()+1;t<e.getLogLines().length;t++){let r=e.getLogLines()[t];if(r.split("|").length>=3)break;this.message=`${this.message}${Tc.EOL}${r}`,e.incrementLogLinePosition()}}};var It=class{constructor(e){this.fields=e}handle(e){let t=e.getTopFrame();if(t){let r=t.id,n=e.getFrameHandler().get(r),i=this.fields[3],o=this.fields[4],c=this.fields[6]==="true",a=e.getUtil().substringUpToLastPeriod(i);a&&!e.getStaticVariablesClassMap().has(a)&&e.getStaticVariablesClassMap().set(a,new Map);let u=e.getStaticVariablesClassMap().get(a);if(c){let l=e.getUtil().substringFromLastPeriod(i);u.set(l,new H(l,"null",o))}else n.locals.has(i)||n.locals.set(i,new H(i,"null",o))}return!1}};var wt=class{constructor(e){this.fields=e}handle(e){let t=e.getTopFrame();if(t){let r=t.id,n=e.getFrameHandler().get(r),i=this.fields[3],o=this.fields[3].split("."),c=i.indexOf(".")>-1?i.substring(0,i.lastIndexOf(".")):"",a=o.length>0?o[o.length-1]:i,u=this.fields[4].replace(/^"/,"'").replace(/"$/,"'"),l;this.fields.length===6&&(l=this.fields[5]);let p=e.getRefsMap(),f,d,g=!1;if(e.getStaticVariablesClassMap().has(c)?(d=e.getStaticVariablesClassMap().get(c),f=d.get(a)):c!=="this"&&n.locals.has(a)?(d=n.locals,f=d.get(a)):i.indexOf(".")!==-1&&(g=!0),l){p.has(l)||e.getRefsMap().set(l,new H("","","",l));let E=p.get(l);if(g)if(u==="{}")E.variables.set(a,new H(a,u,""));else if(u.indexOf("{")===0){let N=new H(a,"","");E.variables.set(a,N),N.variablesRef=e.getVariableHandler().create(N),this.parseJSONAndPopulate(u,N,e)}else if(p.has(u)){let N=p.get(u),V=this.copyReferenceContainer(N,a,e);E.variables.set(a,V)}else if(E.variables.has(a)){let N=E.variables.get(a);N.value=u}else E.variables.set(a,new H(a,u,""));else u.indexOf("{")===0?this.parseJSONAndPopulate(u,E,e):E.variables.set(a,new H(a,u,""));f&&this.isNotCollection(f)&&f.name!=="this"||f&&f.name==="this"&&!f.ref?(f.ref=l,f.value="",f.variables=E.variables,E.type=f.type,u==="{}"&&(f.value=u),f.variablesRef===0&&(f.value="",f.variablesRef=e.getVariableHandler().create(f))):f&&f.name!=="this"&&(f.value=u)}else f&&(f.value=u)}return!1}isNotCollection(e){return!e.type.startsWith("Map<")&&!e.type.startsWith("List<")&&!e.type.startsWith("Set<")}parseJSONAndPopulate(e,t,r){try{e=r.getUtil().surroundBlobsWithQuotes(e);let n=JSON.parse(e);Object.keys(n).forEach(i=>{let o=r.getRefsMap().get(String(n[i]));if(o){let c=this.copyReferenceContainer(o,i,r);t.variables.set(i,c)}else{let c=n[i];typeof c=="string"?(c="'"+c+"'",c=r.getUtil().removeQuotesFromBlob(c)):c=`${c}`,t.variables.set(i,new H(i,c,""))}})}catch{t.value=e,t.variablesRef=0,t.variables.clear()}}copyReferenceContainer(e,t,r){let n=new H(t,e.value,e.type,e.ref);return n.variables=e.variables,n.variablesRef=r.getVariableHandler().create(n),n}};var at=class{constructor(e){this.START_HANDLE=1e3;this._handleMap=new Map;this._nextHandle=typeof e=="number"?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){let t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}copy(){let e=Object.assign(Object.create(Object.getPrototypeOf(this)));return e.START_HANDLE=this.START_HANDLE,e._nextHandle=this._nextHandle,e._handleMap=new Map,this._handleMap.forEach((t,r)=>{t.copy!=="undefined"&&e._handleMap.set(r,t.copy())}),e}};var Xr=class{constructor(e,t,r,n){this.toString=()=>`HeapDumpId: ${this.heapDumpId}, ClassName: ${this.className}, Namespace: ${this.namespace}, Line: ${this.line}`;this.heapDumpId=e,this.className=t,this.namespace=r,this.line=n}getHeapDumpId(){return this.heapDumpId}getClassName(){return this.className}getNamespace(){return this.namespace}getLine(){return this.line}getOverlaySuccessResult(){return this.overlaySuccessResut}setOverlaySuccessResult(e){this.overlaySuccessResut=e}};var Yr=ge(require("fs")),zr=class{getFileSize(e){try{return Yr.statSync(e).size}catch{return 0}}readLogFile(e){try{return Yr.readFileSync(e,"utf-8").trim().split(/\r?\n/)}catch{return[]}}stripBrackets(e){return e.replace("[","").replace("]","")}substringUpToLastPeriod(e){return e.substring(0,e.lastIndexOf("."))}substringFromLastPeriod(e){let t=e.split(".");return t.length>1?t[t.length-1]:e}surroundBlobsWithQuotes(e){return e.replace(/(BLOB\(\d+ bytes\))/g,'"$1"')}removeQuotesFromBlob(e){return e.replace(/'(BLOB\(\d+ bytes\))'/g,"$1")}};var Jr=class{constructor(e,t){this.util=new zr;this.logLines=[];this.frameHandles=new at;this.staticVariablesClassMap=new Map;this.refsMap=new Map;this.variableHandles=new at;this.stackFrameInfos=[];this.logLinePosition=-1;this.execAnonMapping=new Map;this.apexHeapDumps=[];this.lastSeenHeapDumpClass="";this.lastSeenHeapDumpLine=-1;this.backupStackFrameInfos=this.stackFrameInfos;this.backupFrameHandles=this.frameHandles;this.backupRefsMap=this.refsMap;this.backupStaticVariablesClassMap=this.staticVariablesClassMap;this.backupVariableHandles=this.variableHandles;this.launchArgs=e,this.session=t,this.logLines=this.util.readLogFile(e.logFile),this.logSize=this.util.getFileSize(e.logFile)}getUtil(){return this.util}getLaunchArgs(){return this.launchArgs}getSession(){return this.session}getLogLines(){return this.logLines}getLogSize(){return this.logSize}hasLogLines(){return this.logLines&&this.logLines.length>0&&this.logLinePosition<this.logLines.length}meetsLogLevelRequirements(){return this.logLines&&this.logLines.length>0&&this.logLines[0].match(/(\d{2}.*APEX_CODE,FINEST;.*VISUALFORCE,FINER;.*|\d{2}.*APEX_CODE,FINEST;.*VISUALFORCE,FINEST;.*)/)!==null}getHeapDumps(){return this.apexHeapDumps}hasHeapDump(){return this.apexHeapDumps.length>0}getHeapDumpForThisLocation(e,t){for(let r of this.apexHeapDumps)if(e.includes(r.getClassName())&&t===r.getLine())return r}hasHeapDumpForTopFrame(){let e=this.getTopFrame();if(e){let t=this.getHeapDumpForThisLocation(e.name,e.line);if(t&&e.name.includes(this.lastSeenHeapDumpClass)&&e.line===this.lastSeenHeapDumpLine)return t.getHeapDumpId()}}resetLastSeenHeapDumpLogLine(){this.lastSeenHeapDumpClass="",this.lastSeenHeapDumpLine=-1}isRunningApexTrigger(){return!!this.getTopFrame()?.source?.name?.toLowerCase().endsWith(".trigger")}copyStateForHeapDump(){this.backupStackFrameInfos=JSON.parse(JSON.stringify(this.stackFrameInfos)),this.backupFrameHandles=this.frameHandles.copy(),this.backupRefsMap=new Map,this.backupVariableHandles=new at,this.cloneStaticVariablesClassMap();for(let e of this.backupStackFrameInfos){let t=this.backupFrameHandles.get(e.id);this.copyVariableContainers(t.locals),this.copyVariableContainers(t.statics)}}copyVariableContainers(e){e.forEach((t,r)=>{let n=t;if(n.ref){this.backupRefsMap.set(n.ref,n);let i=this.backupVariableHandles.create(n);n.variablesRef=i,this.copyVariableContainers(n.variables)}})}cloneStaticVariablesClassMap(){this.backupStaticVariablesClassMap=new Map,this.staticVariablesClassMap.forEach((e,t)=>{let r=e,n=new Map;r.forEach((i,o)=>{let c=i;n.set(o,c.copy())}),this.backupStaticVariablesClassMap.set(t,n)})}revertStateAfterHeapDump(){this.staticVariablesClassMap=this.backupStaticVariablesClassMap,this.stackFrameInfos=this.backupStackFrameInfos,this.frameHandles=this.backupFrameHandles,this.refsMap=this.backupRefsMap,this.variableHandles=this.backupVariableHandles}scanLogForHeapDumpLines(){let e=RegExp(/\|HEAP_DUMP\|/);return this.logLines.forEach((t,r)=>{if(e.test(t)){let n=t.split("|");if(n.length>=7){let i=new Xr(n[3],n[4],n[5],Number(n[6]));this.apexHeapDumps.push(i)}else this.session.printToDebugConsole(ie.localize("malformed_log_line",r+1,t))}}),this.apexHeapDumps.length>0}async fetchOverlayResultsForApexHeapDumps(e){let t=!0;try{let r=await new ut.OrgDisplay().getOrgInfo(e),n=new ut.RequestService;n.instanceUrl=r.instanceUrl,n.accessToken=r.accessToken;for(let i of this.apexHeapDumps){this.session.printToDebugConsole(ie.localize("fetching_heap_dump",i.toString()));let o=new Ct(i.getHeapDumpId()),c,a;if(await n.execute(o,ut.RestHttpMethodEnum.Get).then(u=>{a=u},u=>{c=u}),a)i.setOverlaySuccessResult(JSON.parse(a));else if(c)try{t=!1;let u=JSON.parse(c),l=ie.localize("heap_dump_error",u[0].message,u[0].errorCode,i.toString());this.session.errorToDebugConsole(l)}catch(u){let l=`${u}. ${c}. ${i.toString()}`;this.session.errorToDebugConsole(l)}}}catch(r){t=!1;let n=JSON.parse(r),i=`${ie.localize("unable_to_retrieve_org_info")} : ${n.message}`;this.session.errorToDebugConsole(i)}return t}getLogFileName(){return Cc.basename(this.launchArgs.logFile)}getLogFilePath(){return this.launchArgs.logFile}getLogLinePosition(){return this.logLinePosition}incrementLogLinePosition(){this.logLinePosition+=1}getFrames(){return this.stackFrameInfos}getNumOfFrames(){return this.stackFrameInfos.length}getTopFrame(){if(this.stackFrameInfos.length>0)return this.stackFrameInfos[this.stackFrameInfos.length-1]}getRefsMap(){return this.refsMap}getStaticVariablesClassMap(){return this.staticVariablesClassMap}getFrameHandler(){return this.frameHandles}getVariableHandler(){return this.variableHandles}setState(e){this.state=e}hasState(){return this.state!==void 0}getExecAnonScriptLocationInDebugLog(e){return this.execAnonMapping.get(e)||0}getExecAnonScriptMapping(){return this.execAnonMapping}getUriFromSignature(e){if(e===je)return this.getLogFilePath();let t=e.endsWith(")")?e.substring(0,e.substring(0,e.indexOf("(")).lastIndexOf(".")):e,r=ke.getTyperefMapping(),n="";return r.forEach((i,o)=>{let c="";if(o.startsWith(dt)?c=o:c=o.replace("/",".").replace("$","."),c===t){n=i;return}}),n}hasFrames(){return this.stackFrameInfos&&this.stackFrameInfos.length>0}updateFrames(){for(this.hasHeapDump()&&this.revertStateAfterHeapDump(),this.state instanceof it&&this.stackFrameInfos.pop();++this.logLinePosition<this.logLines.length;){let e=this.logLines[this.logLinePosition];if(e&&(this.setState(this.parseLogEvent(e)),this.session.shouldTraceLogFile()&&!(this.state instanceof ot)&&this.session.printToDebugConsole(e),this.state&&this.state.handle(this)))break}}parseLogEvent(e){if(this.state===void 0)return new it;e.startsWith(Wn)&&this.execAnonMapping.set(this.execAnonMapping.size+1,this.logLinePosition+1);let t=e.split("|");if(t.length>=3)switch(t[1]){case Jt:case Kt:case Qn:return new st(t);case Zt:return Te.isExtraneousVFGetterOrSetterLogLine(t[t.length-2])?new Oe:new st(t);case Wt:case Qt:case Zn:return new nt(t);case ri:return new It(t);case si:return new wt(t);case er:return Te.isExtraneousVFGetterOrSetterLogLine(t[t.length-2])?new Oe:new nt(t);case ei:if(e.match(/.*\|.*\|\[\d{1,}\]/))return t[2]=this.util.stripBrackets(t[2]),new At(t);break;case ti:if(e.match(/.*\|.*\|\[\d{1,}\]\|.*\|.*/))return t[2]=this.util.stripBrackets(t[2]),new ot(t);break;case Kn:if(e.match(/.+\|HEAP_DUMP|\[\d+\]|.+\|.+\|\d+/)){let r=e.split("|");this.lastSeenHeapDumpClass=r[4],this.lastSeenHeapDumpLine=Number(r[6])}break;default:return new Oe}return new Oe}};var Ac="all",bg="protocol",Eg="logfile",_g="launch",Ic="breakpoints",Pc=(n=>(n[n.Over=0]="Over",n[n.In=1]="In",n[n.Out=2]="Out",n[n.Run=3]="Run",n))(Pc||{}),Nt=class extends D.Variable{constructor(t,r,n,i=0,o){super(t,r,i);this.type=n,this.apexRef=o,this.evaluateName=r}},qe=class{constructor(e,t){this.frameNumber=e,this.signature=t,this.statics=new Map,this.locals=new Map,this.globals=new Map}copy(){let e=new qe(this.frameNumber,this.signature);return this.statics.forEach((t,r)=>{e.statics.set(r,t.copy())}),this.locals.forEach((t,r)=>{e.locals.set(r,t.copy())}),e}},Nc=(r=>(r.LOCAL="local",r.STATIC="static",r.GLOBAL="global",r))(Nc||{}),Dt=class{constructor(e=new Map){this.variables=e}getAllVariables(){let e=[];return this.variables.forEach(t=>{let r=t;e.push(new Nt(r.name,r.value,r.type,r.variablesRef))}),e}copy(){let e=Object.assign(Object.create(Object.getPrototypeOf(this)));return e.variables=new Map,this.variables.forEach((t,r)=>{e.variables.set(r,t.copy())}),e}},H=class extends Dt{constructor(t,r,n,i,o=0){super();this.name=t,this.value=r,this.type=n,this.ref=i,this.variablesRef=o}copy(){let t=super.copy();return t.name=this.name,t.value=this.value,t.type=this.type,t.ref=this.ref,t.variablesRef=this.variablesRef,t}},ct=class extends Dt{constructor(t,r){super(r);this.type=t}getAllVariables(){let t=[];return this.variables.forEach(r=>{let n=r;t.push(new Nt(n.name,n.value,n.type,n.variablesRef))}),t}},Me=class extends D.LoggingDebugSession{constructor(){super("apex-replay-debug-adapter.log");this.trace=[];this.traceAll=!1;this.breakpoints=new Map;this.setDebuggerLinesStartAt1(!0),this.setDebuggerPathFormat("uri")}initializeRequest(t,r){this.initializedResponse=t,this.initializedResponse.body={supportsConfigurationDoneRequest:!0,supportsCompletionsRequest:!1,supportsConditionalBreakpoints:!0,supportsDelayedStackTraceLoading:!1,supportsEvaluateForHovers:!1,supportsExceptionInfoRequest:!1,supportsExceptionOptions:!1,supportsFunctionBreakpoints:!1,supportsHitConditionalBreakpoints:!1,supportsLoadedSourcesRequest:!1,supportsRestartFrame:!1,supportsSetVariable:!1,supportsStepBack:!1,supportsStepInTargetsRequest:!1},this.initializedResponse.success=!0,this.sendResponse(this.initializedResponse)}async launchRequest(t,r){let n=!1;r?.lineBreakpointInfo&&(n=!0,ke.createMappingsFromLineBreakpointInfo(r.lineBreakpointInfo),delete r.lineBreakpointInfo),this.projectPath=r.projectPath,t.success=!1,this.setupLogger(r),this.log(_g,`launchRequest: args=${JSON.stringify(r)}`),this.sendEvent(new D.Event(Ue,{subject:`launchRequest: args=${JSON.stringify(r)}`,type:"launchApexReplayDebugger"})),this.logContext=new Jr(r,this),this.heapDumpService=new tr(this.logContext),this.logContext.hasLogLines()?this.logContext.meetsLogLevelRequirements()?n?(this.printToDebugConsole(ie.localize("session_started_text",this.logContext.getLogFileName())),this.projectPath&&this.logContext.scanLogForHeapDumpLines()&&!await this.logContext.fetchOverlayResultsForApexHeapDumps(this.projectPath)&&(t.message=ie.localize("heap_dump_error_wrap_up_text"),this.errorToDebugConsole(ie.localize("heap_dump_error_wrap_up_text")),this.sendEvent(new D.Event(me,{subject:"Fetching heap dumps failed",callstack:new Error().stack,message:t.message}))),t.success=!0):(t.message=ie.localize("session_language_server_error_text"),this.sendEvent(new D.Event(me,{subject:"No line breakpoint info available",callstack:new Error().stack,message:t.message}))):(t.message=ie.localize("incorrect_log_levels_text"),this.sendEvent(new D.Event(me,{subject:"Incorrect log levels",callstack:new Error().stack,message:t.message}))):(t.message=ie.localize("no_log_file_text"),this.sendEvent(new D.Event(me,{subject:"No log lines found",callstack:new Error().stack,message:t.message}))),this.sendResponse(t),this.sendEvent(new D.InitializedEvent),this.sendEvent(new D.Event(ni,{logSize:this.logContext.getLogSize(),error:{subject:t.message}}))}setupLogger(t){typeof t.trace=="boolean"?(this.trace=t.trace?[Ac]:[],this.traceAll=t.trace):typeof t.trace=="string"&&(this.trace=t.trace.split(",").map(r=>r.trim()),this.traceAll=this.trace.indexOf(Ac)>=0),this.trace?.indexOf(bg)>=0?D.logger.setup(D.Logger.LogLevel.Verbose,!1):D.logger.setup(D.Logger.LogLevel.Stop,!1)}configurationDoneRequest(t,r){this.logContext.getLaunchArgs().stopOnEntry?(this.logContext.updateFrames(),this.sendEvent(new D.StoppedEvent("entry",Me.THREAD_ID))):this.continueRequest({},{threadId:Me.THREAD_ID}),this.sendEvent(new D.Event(Ue,{subject:"configurationDoneRequest",type:"apexReplayDebuggerConfigurationDone"}))}disconnectRequest(t,r){this.printToDebugConsole(ie.localize("session_terminated_text")),t.success=!0,this.sendResponse(t),this.sendEvent(new D.Event(Ue,{subject:"disconnectRequest",type:"apexReplayDebuggerDisconnect"}))}threadsRequest(t){t.body={threads:[new D.Thread(Me.THREAD_ID,"")]},t.success=!0,this.sendResponse(t)}stackTraceRequest(t,r){t.body={stackFrames:this.logContext.getFrames().slice().reverse()},t.success=!0,this.sendResponse(t)}async scopesRequest(t,r){let n=this.logContext.hasHeapDumpForTopFrame();if(n)try{this.logContext.copyStateForHeapDump(),this.heapDumpService.replaceVariablesWithHeapDump()}catch(c){this.sendEvent(new D.Event(me,{subject:"Heap dump processing error",callstack:c.stack,message:c.message})),this.logContext.revertStateAfterHeapDump(),this.warnToDebugConsole(ie.localize("reconcile_heapdump_error",c,n,n))}finally{this.logContext.resetLastSeenHeapDumpLogLine()}t.success=!0;let i=this.logContext.getFrameHandler().get(r.frameId);if(!i){t.body={scopes:[]},this.sendResponse(t);return}let o=new Array;o.push(new D.Scope("Local",this.logContext.getVariableHandler().create(new ct("local",i.locals)),!1)),o.push(new D.Scope("Static",this.logContext.getVariableHandler().create(new ct("static",i.statics)),!1)),o.push(new D.Scope("Global",this.logContext.getVariableHandler().create(new ct("global",i.globals)),!1)),t.body={scopes:o},this.sendResponse(t),this.sendEvent(new D.Event(Ue,{subject:"scopesRequest",type:"apexReplayDebuggerScopesRequest",numberOfScopes:o.length}))}async variablesRequest(t,r){t.success=!0;try{let n=this.logContext.getVariableHandler().get(r.variablesReference);t.body={variables:n?n.getAllVariables():[]},this.sendResponse(t)}catch(n){this.sendEvent(new D.Event(me,{subject:"Error in variablesRequest",callstack:n.stack,message:n.message})),t.success=!1,this.sendResponse(t)}}evaluateRequest(t,r){t.body={result:r.expression,variablesReference:0},t.success=!0,this.sendResponse(t)}continueRequest(t,r){this.executeStep(t,3)}nextRequest(t,r){this.executeStep(t,0)}stepInRequest(t,r){this.executeStep(t,1)}stepOutRequest(t,r){this.executeStep(t,2)}executeStep(t,r){t.success=!0,this.sendResponse(t);try{let n=this.logContext.getNumOfFrames();for(;this.logContext.hasLogLines();){this.logContext.updateFrames();let i=this.logContext.getNumOfFrames();if(r===0&&i!==0&&i<=n||r===1&&i>=n||r===2&&i!==0&&i<n)return this.sendEvent(new D.StoppedEvent("step",Me.THREAD_ID));if(this.shouldStopForBreakpoint())return}this.sendEvent(new D.TerminatedEvent)}catch(n){throw this.sendEvent(new D.Event(me,{subject:"Error during step execution",callstack:n.stack,message:n.message})),n}}shouldStopForBreakpoint(){let t=this.logContext.getTopFrame(),r=t?.source?.path??null,n=t?.line??null;if(r&&n){let i=this.convertClientPathToDebugger(r),o=this.convertClientLineToDebugger(n);if((this.breakpoints.get(i)??[]).includes(o))return this.sendEvent(new D.StoppedEvent("breakpoint",Me.THREAD_ID)),!0}return!1}setBreakPointsRequest(t,r){if(t.body={breakpoints:[]},r.source.path&&r.breakpoints){let n=this.convertClientPathToDebugger(r.source.path);this.log(Ic,`setBreakPointsRequest: path=${r.source.path} uri=${n} lines=${ke.returnLinesForLoggingFromBreakpointArgs(r.breakpoints)}`),this.breakpoints.set(n,[]);for(let i of r.breakpoints){let o=ke.canSetLineBreakpoint(n,this.convertClientLineToDebugger(i.line));t.body.breakpoints.push({verified:o,source:r.source,line:i.line}),o?this.breakpoints.get(n).push(this.convertClientLineToDebugger(i.line)):this.sendEvent(new D.Event(me,{subject:"Failed to set breakpoint",callstack:new Error().stack,message:`Failed to set breakpoint at line ${i.line} in ${r.source.path}`}))}this.log(Ic,`setBreakPointsRequest: path=${r.source.path} verified lines=${this.breakpoints.get(n).join(",")}`),this.sendEvent(new D.Event(Ue,{subject:"setBreakPointsRequest",type:"apexReplayDebuggerSetBreakpoints",numberOfVerifiedBreakpoints:t.body.breakpoints.filter(i=>i.verified).length}))}else this.sendEvent(new D.Event(me,{subject:"setBreakPointsRequest - path or breakpoints invalid",type:"apexReplayDebuggerSetBreakpoints"}));t.success=!0,this.sendResponse(t)}log(t,r){this.trace&&(this.traceAll||this.trace.indexOf(t)>=0)&&this.printToDebugConsole(`${process.pid}: ${r}`)}shouldTraceLogFile(){return this.traceAll||this.trace.indexOf(Eg)!==-1}printToDebugConsole(t,r,n,i="stdout"){if(t?.length!==0){let o=new D.OutputEvent(`${t}${wc.EOL}`,i);o.body.source=r,o.body.line=n,o.body.column=0,this.sendEvent(o)}}warnToDebugConsole(t,r,n){this.printToDebugConsole(t,r,n,"console")}errorToDebugConsole(t,r,n){this.printToDebugConsole(t,r,n,"stderr")}},Pt=Me;Pt.THREAD_ID=1;D.DebugSession.run(Pt);0&&(module.exports={ApexDebugStackFrameInfo,ApexReplayDebug,ApexVariable,ApexVariableContainer,SCOPE_TYPES,ScopeContainer,Step,VariableContainer});
